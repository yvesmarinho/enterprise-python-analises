{"version":3,"file":"776.js?_cache=af7b61fe118bc8f81cea","mappings":"kVAQA,SAASA,GAAkC,iBACzCC,EAAgB,kBAChBC,EAAiB,eACjBC,EAAc,UACdC,IAEA,MAAMC,EAAa,IAAIC,EAAAA,GAAe,CACpCC,MAAON,EACPO,KAAMP,EAAiBQ,IAAID,KAAKE,WAChCC,GAAIV,EAAiBQ,IAAIE,GAAGD,aAG9BL,EAAWO,kBAAkBC,IACvBX,GACFA,EAAkBW,EAAMN,MAC1B,IAGF,MAAMO,EAAc,IAAIC,EAAAA,EAAsB,CAC5CV,aACAW,YAAY,EACZb,eAAgBA,EAAiBA,EAAec,KAAKC,G,sUAAY,IAAKA,UAAaC,EACnFf,cAGIgB,EAAS,IAAIC,gBAAgBC,OAAOC,SAASC,QAGnD,OAFAC,EAAAA,GAAWC,0BAA0BZ,EAAaM,GAE3CN,CACT,CAEe,SAASa,EAA4BC,GAClD,MAAOd,IAAee,EAAAA,EAAAA,UAAS7B,EAAkC4B,IAEjE,OACE,kBAACE,EAAAA,GAAsBA,CAACC,UAAU,KAAKC,MAAOlB,EAAamB,iBAAiB,EAAOC,2BAA2B,GAC5G,kBAACC,EAAAA,GAAmBA,CAACC,OAAQC,EAAAA,GAC3B,kBAACvB,EAAYwB,UAAS,CAACC,MAAOzB,KAItC,C","sources":["webpack://grafana-pyroscope-app/./exposedComponents/EmbeddedProfilesExploration/EmbeddedProfilesExploration.tsx"],"sourcesContent":["import { SceneTimeRange, sceneUtils, UrlSyncContextProvider } from '@grafana/scenes';\nimport { queryClient } from '@shared/infrastructure/react-query/queryClient';\nimport { QueryClientProvider } from '@tanstack/react-query';\nimport React, { useState } from 'react';\nimport { SceneProfilesExplorer } from 'src/pages/ProfilesExplorerView/components/SceneProfilesExplorer/SceneProfilesExplorer';\n\nimport { EmbeddedProfilesExplorationState } from '../types';\n\nfunction buildProfilesExplorationFromState({\n  initialTimeRange,\n  onTimeRangeChange,\n  initialFilters,\n  initialDS,\n}: EmbeddedProfilesExplorationState) {\n  const $timeRange = new SceneTimeRange({\n    value: initialTimeRange,\n    from: initialTimeRange.raw.from.toString(),\n    to: initialTimeRange.raw.to.toString(),\n  });\n\n  $timeRange.subscribeToState((state) => {\n    if (onTimeRangeChange) {\n      onTimeRangeChange(state.value);\n    }\n  });\n\n  const exploration = new SceneProfilesExplorer({\n    $timeRange,\n    isEmbedded: true,\n    initialFilters: initialFilters ? initialFilters.map((filter) => ({ ...filter })) : undefined,\n    initialDS,\n  });\n\n  const params = new URLSearchParams(window.location.search);\n  sceneUtils.syncStateFromSearchParams(exploration, params);\n\n  return exploration;\n}\n\nexport default function EmbeddedProfilesExploration(props: EmbeddedProfilesExplorationState) {\n  const [exploration] = useState(buildProfilesExplorationFromState(props));\n\n  return (\n    <UrlSyncContextProvider namespace=\"pd\" scene={exploration} updateUrlOnInit={false} createBrowserHistorySteps={true}>\n      <QueryClientProvider client={queryClient}>\n        <exploration.Component model={exploration} />\n      </QueryClientProvider>\n    </UrlSyncContextProvider>\n  );\n}\n"],"names":["buildProfilesExplorationFromState","initialTimeRange","onTimeRangeChange","initialFilters","initialDS","$timeRange","SceneTimeRange","value","from","raw","toString","to","subscribeToState","state","exploration","SceneProfilesExplorer","isEmbedded","map","filter","undefined","params","URLSearchParams","window","location","search","sceneUtils","syncStateFromSearchParams","EmbeddedProfilesExploration","props","useState","UrlSyncContextProvider","namespace","scene","updateUrlOnInit","createBrowserHistorySteps","QueryClientProvider","client","queryClient","Component","model"],"sourceRoot":""}