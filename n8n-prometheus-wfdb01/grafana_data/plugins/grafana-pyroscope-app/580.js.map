{"version":3,"file":"580.js?_cache=ddddfc2cf4ae953aae6c","mappings":"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","sources":["webpack://grafana-pyroscope-app/./app/components/Onboarding/infrastructure/statsApiClient.ts","webpack://grafana-pyroscope-app/./app/components/Onboarding/domain/useOnboarding.tsx","webpack://grafana-pyroscope-app/./app/components/Onboarding/infrastructure/useFetchTenantStats.ts","webpack://grafana-pyroscope-app/./shared/components/QueryAnalysisTooltip/QueryAnalysisTooltip.tsx","webpack://grafana-pyroscope-app/./shared/ui/PageTitle.tsx","webpack://grafana-pyroscope-app/./app/components/Onboarding/ui/EmptyLoadingPage.tsx","webpack://grafana-pyroscope-app/./app/components/Onboarding/ui/StyledLink.tsx","webpack://grafana-pyroscope-app/./app/components/Onboarding/ui/NoDataSourcePage.tsx","webpack://grafana-pyroscope-app/./app/components/Onboarding/domain/useOnboardingModal.tsx","webpack://grafana-pyroscope-app/./app/components/Onboarding/infrastructure/useFetchInstances.tsx","webpack://grafana-pyroscope-app/./app/components/Onboarding/ui/OnboardingModal.tsx","webpack://grafana-pyroscope-app/./app/components/Onboarding/ui/OnboardingPage.tsx","webpack://grafana-pyroscope-app/./app/components/Onboarding/Onboarding.tsx","webpack://grafana-pyroscope-app/./shared/components/Common/BackButton.tsx","webpack://grafana-pyroscope-app/./shared/infrastructure/tracking/useReportPageInitialized.ts","webpack://grafana-pyroscope-app/./pages/AdHocView/ui/AdHocColums.tsx","webpack://grafana-pyroscope-app/./pages/AdHocView/infrastructure/adHocProfileClient.ts","webpack://grafana-pyroscope-app/./pages/AdHocView/infrastructure/helpers/stripBase64Prefix.ts","webpack://grafana-pyroscope-app/./pages/AdHocView/domain/useUploadFile.ts","webpack://grafana-pyroscope-app/./pages/AdHocView/ui/AdHocFileDropZone.tsx","webpack://grafana-pyroscope-app/./pages/AdHocView/domain/accepted-file-types.ts","webpack://grafana-pyroscope-app/./pages/AdHocView/ui/AdHocFlameGraph.tsx","webpack://grafana-pyroscope-app/./pages/AdHocView/ui/AdHocProfileTypeSelector.tsx","webpack://grafana-pyroscope-app/./pages/AdHocView/ui/AdHocSpinner.tsx","webpack://grafana-pyroscope-app/./pages/AdHocView/ui/tabs/AdHocSingle.tsx","webpack://grafana-pyroscope-app/./pages/AdHocView/ui/tabs/AdHocComparison.tsx","webpack://grafana-pyroscope-app/./pages/AdHocView/ui/AdHocTabs.tsx","webpack://grafana-pyroscope-app/./pages/AdHocView/AdHocView.tsx","webpack://grafana-pyroscope-app/./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/ui/GitHubCallbackView.tsx","webpack://grafana-pyroscope-app/./pages/ProfilesExplorerView/ProfilesExplorerView.tsx","webpack://grafana-pyroscope-app/./pages/RecordingRulesView/DeleteRecordingRuleButton.tsx","webpack://grafana-pyroscope-app/./pages/RecordingRulesView/domain/useRecordingRulesView.ts","webpack://grafana-pyroscope-app/./pages/RecordingRulesView/RecordingRulesView.tsx","webpack://grafana-pyroscope-app/./pages/SettingsView/components/UISettingsView/domain/useUISettingsView.ts","webpack://grafana-pyroscope-app/./pages/SettingsView/components/UISettingsView/UISettingsView.tsx","webpack://grafana-pyroscope-app/./pages/SettingsView/domain/useSettingsExtensions.ts","webpack://grafana-pyroscope-app/./pages/SettingsView/domain/useSettingsView.ts","webpack://grafana-pyroscope-app/./pages/SettingsView/SettingsView.tsx","webpack://grafana-pyroscope-app/./app/Routes.tsx","webpack://grafana-pyroscope-app/./app/ui/ErrorPage.tsx","webpack://grafana-pyroscope-app/./app/App.tsx"],"sourcesContent":["import { ApiClient } from '@shared/infrastructure/http/ApiClient';\n\nexport type Stats = {\n  hasIngestedData: boolean;\n  oldestProfileTime: number;\n  newestProfileTime: number;\n};\n\nclass StatsApiClient extends ApiClient {\n  async get(): Promise<Stats> {\n    const response = await this.fetch('/querier.v1.QuerierService/GetProfileStats', {\n      method: 'POST',\n      body: JSON.stringify({}),\n    });\n\n    const json = await response.json();\n\n    return {\n      hasIngestedData: json.dataIngested,\n      oldestProfileTime: Number(json.oldestProfileTime),\n      newestProfileTime: Number(json.newestProfileTime),\n    };\n  }\n}\n\nexport const statsApiClient = new StatsApiClient();\n","import { ApiClient } from '@shared/infrastructure/http/ApiClient';\nimport { DomainHookReturnValue } from '@shared/types/DomainHookReturnValue';\nimport { useState } from 'react';\n\nimport { useFetchTenantStats } from '../infrastructure/useFetchTenantStats';\n\nexport function useOnboarding(): DomainHookReturnValue {\n  const [isModalClosed, setIsModalClosed] = useState(false);\n\n  const pyroscopeDataSourcesCount = ApiClient.getPyroscopeDataSources().length;\n  const { isFetching, error, stats } = useFetchTenantStats({ enabled: pyroscopeDataSourcesCount > 0 });\n  const hasNoUserData = !isFetching && !stats?.hasIngestedData;\n\n  return {\n    data: {\n      shouldShowLoadingPage: !error && isFetching,\n      shouldShowOnboardingPage: (error || !pyroscopeDataSourcesCount || hasNoUserData) && !isModalClosed,\n      shouldShowNoDataSourceBanner: !pyroscopeDataSourcesCount,\n    },\n    actions: {\n      closeModal() {\n        setIsModalClosed(true);\n      },\n    },\n  };\n}\n","import { useQuery } from '@tanstack/react-query';\n\nimport { Stats, statsApiClient } from './statsApiClient';\n\ntype FetchResponse = {\n  isFetching: boolean;\n  error: Error | null;\n  stats?: Stats;\n  refetch: () => void;\n};\n\nexport function useFetchTenantStats({ enabled }: { enabled: boolean }): FetchResponse {\n  const { isFetching, error, data, refetch } = useQuery({\n    enabled,\n    placeholderData: () => ({ hasIngestedData: true, oldestProfileTime: 0, newestProfileTime: 0 }),\n    queryKey: ['tenant-stats'],\n    queryFn: () => {\n      statsApiClient.abort();\n\n      return statsApiClient.get();\n    },\n  });\n\n  return {\n    isFetching,\n    error: statsApiClient.isAbortError(error) ? null : error,\n    stats: data,\n    refetch,\n  };\n}\n","import { css } from '@emotion/css';\nimport { formattedValueToString, getValueFormat, GrafanaTheme2 } from '@grafana/data';\nimport { Divider, IconButton, styleMixins, Toggletip, useStyles2 } from '@grafana/ui';\nimport React, { useMemo } from 'react';\n\nimport { QueryAnalysisResult } from './domain/QueryAnalysis';\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  row: css({\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n  }),\n  headerColumn: css({\n    display: 'flex',\n    flexDirection: 'column',\n    minWidth: '120px',\n    alignItems: 'start',\n  }),\n  column: css({\n    display: 'flex',\n    flexDirection: 'column',\n    minWidth: '120px',\n    alignItems: 'end',\n  }),\n  tooltip: css({\n    display: 'flex',\n    color: theme.colors.text.secondary,\n    fontSize: theme.typography.bodySmall.fontSize,\n  }),\n  contentWithIcon: css({\n    display: 'none',\n\n    [`@media ${styleMixins.mediaUp(theme.v1.breakpoints.sm)}`]: {\n      display: 'block',\n    },\n  }),\n});\n\ntype QueryAnalysisTooltipProps = {\n  data: QueryAnalysisResult;\n};\n\nconst formatSize = (size: number) => formattedValueToString(getValueFormat('decbytes')(size));\n\nconst formatCount = (count: number) => formattedValueToString(getValueFormat('short')(count));\n\nexport function QueryAnalysisTooltip(props: QueryAnalysisTooltipProps) {\n  const styles = useStyles2(getStyles);\n  const { data } = props;\n  const totalBytesInTimeRange = formatSize(data.queryImpact.totalBytesInTimeRange);\n\n  const queryAnalysisTooltip = useMemo(() => {\n    return (\n      <div data-testid=\"queryAnalysis-popup\">\n        <div className={styles.row}>\n          <div className={styles.headerColumn}>Data in time range</div>\n          <div className={styles.column}>{totalBytesInTimeRange}</div>\n          <div className={styles.column}>&nbsp;</div>\n        </div>\n        {data.queryImpact.totalQueriedSeries !== undefined && (\n          <div className={styles.row}>\n            <div className={styles.headerColumn}>Series in query</div>\n            <div className={styles.column}>{formatCount(data.queryImpact.totalQueriedSeries)}</div>\n            <div className={styles.column}>&nbsp;</div>\n          </div>\n        )}\n        <div className={styles.row}>\n          <div className={styles.headerColumn}>Deduplication</div>\n          <div className={styles.column}>{data.queryImpact.deduplicationNeeded ? 'yes' : 'no'}</div>\n          <div className={styles.column}>&nbsp;</div>\n        </div>\n        <Divider />\n        <div className={styles.row}>\n          <div className={styles.headerColumn}>&nbsp;</div>\n          {data.queryScopes.map((s, i) => (\n            <div key={i} className={styles.column}>\n              <strong>{s.componentType}</strong>\n            </div>\n          ))}\n        </div>\n        <div className={styles.row}>\n          <div className={styles.headerColumn}>Replicas</div>\n          {data.queryScopes.map((s, i) => (\n            <div key={i} className={styles.column}>\n              {s.componentCount || '/'}\n            </div>\n          ))}\n        </div>\n        <div className={styles.row}>\n          <div className={styles.headerColumn}>Blocks</div>\n          {data.queryScopes.map((s, i) => (\n            <div key={i} className={styles.column}>\n              {formatCount(s.blockCount) || '/'}\n            </div>\n          ))}\n        </div>\n        <div className={styles.row}>\n          <div className={styles.headerColumn}>Series</div>\n          {data.queryScopes.map((s, i) => (\n            <div key={i} className={styles.column}>\n              {formatCount(s.seriesCount) || '/'}\n            </div>\n          ))}\n        </div>\n        <div className={styles.row}>\n          <div className={styles.headerColumn}>Profiles</div>\n          {data.queryScopes.map((s, i) => (\n            <div key={i} className={styles.column}>\n              {formatCount(s.profileCount) || '/'}\n            </div>\n          ))}\n        </div>\n        <div className={styles.row}>\n          <div className={styles.headerColumn}>Samples</div>\n          {data.queryScopes.map((s, i) => (\n            <div key={i} className={styles.column}>\n              {formatCount(s.sampleCount) || '/'}\n            </div>\n          ))}\n        </div>\n        <div className={styles.row}>\n          <div className={styles.headerColumn}>&nbsp;</div>\n          <div className={styles.column}>&nbsp;</div>\n          <div className={styles.column}>&nbsp;</div>\n        </div>\n        <div className={styles.row}>\n          <div className={styles.headerColumn}>Index Store</div>\n          {data.queryScopes.map((s, i) => (\n            <div key={i} className={styles.column}>\n              {formatSize(s.indexBytes) || '/'}\n            </div>\n          ))}\n        </div>\n        <div className={styles.row}>\n          <div className={styles.headerColumn}>Profiles Store</div>\n          {data.queryScopes.map((s, i) => (\n            <div key={i} className={styles.column}>\n              {formatSize(s.profileBytes) || '/'}\n            </div>\n          ))}\n        </div>\n        <div className={styles.row}>\n          <div className={styles.headerColumn}>Symbols Store</div>\n          {data.queryScopes.map((s, i) => (\n            <div key={i} className={styles.column}>\n              {formatSize(s.symbolBytes) || '/'}\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }, [data, styles, totalBytesInTimeRange]);\n\n  return (\n    <>\n      {data.queryImpact.totalBytesInTimeRange !== undefined ? (\n        <Toggletip content={queryAnalysisTooltip} fitContent={true}>\n          <div className={styles.tooltip} data-testid=\"queryAnalysis-tooltip\">\n            <span className={styles.contentWithIcon}>Stored data in time range: {totalBytesInTimeRange}</span>\n            &nbsp;\n            <IconButton name=\"database\" aria-label=\"Query info\" />\n          </div>\n        </Toggletip>\n      ) : null}\n    </>\n  );\n}\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Stack, useStyles2 } from '@grafana/ui';\nimport { QueryAnalysisResult } from '@shared/components/QueryAnalysisTooltip/domain/QueryAnalysis';\nimport { QueryAnalysisTooltip } from '@shared/components/QueryAnalysisTooltip/QueryAnalysisTooltip';\nimport React, { memo, ReactNode } from 'react';\nimport { Helmet } from 'react-helmet';\n\nimport { PluginInfo } from './PluginInfo';\nimport { PyroscopeLogo } from './PyroscopeLogo';\n\ntype PageTitleProps = {\n  title: ReactNode;\n  queryAnalysis?: QueryAnalysisResult;\n};\n\nfunction PageTitleComponent({ title, queryAnalysis }: PageTitleProps) {\n  const styles = useStyles2(getStyles);\n  const fullTitle = typeof title === 'string' ? `${title} | Pyroscope` : 'Pyroscope';\n\n  return (\n    <>\n      <Helmet>\n        <title>{fullTitle}</title>\n      </Helmet>\n      <div className={styles.titleContainer}>\n        <Stack justifyContent=\"space-between\">\n          <div>\n            <PyroscopeLogo size=\"large\" />\n            <h1 className={styles.title} data-testid=\"page-title\">\n              {title}\n            </h1>\n          </div>\n          <div className={styles.infoArea}>\n            <PluginInfo />\n            {queryAnalysis ? <QueryAnalysisTooltip data={queryAnalysis} /> : null}\n          </div>\n        </Stack>\n      </div>\n    </>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  titleContainer: css`\n    height: ${theme.spacing(5)};\n    line-height: ${theme.spacing(5)};\n    margin-bottom: ${theme.spacing(3)};\n  `,\n  title: css`\n    font-size: ${theme.typography.h2.fontSize};\n    display: inline-block;\n    margin: 0;\n    position: relative;\n    top: 10px;\n    left: ${theme.spacing(1)};\n  `,\n  infoArea: css`\n    align-self: end;\n    margin-bottom: 0;\n    line-height: 20px;\n    text-align: right;\n  `,\n});\n\nexport const PageTitle = memo(PageTitleComponent);\n","import { PageLayoutType } from '@grafana/data';\nimport { PluginPage } from '@grafana/runtime';\nimport { Icon } from '@grafana/ui';\nimport { PageTitle } from '@shared/ui/PageTitle';\nimport React from 'react';\n\nexport function EmptyLoadingPage() {\n  return (\n    <PluginPage layout={PageLayoutType.Canvas}>\n      <PageTitle\n        title={\n          <span>\n            Loading... <Icon name=\"fa fa-spinner\" />\n          </span>\n        }\n      />\n    </PluginPage>\n  );\n}\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Icon, useStyles2 } from '@grafana/ui';\nimport React from 'react';\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  link: css`\n    color: ${theme.colors.text.link};\n    &:hover {\n      text-decoration: underline;\n    }\n  `,\n});\n\nexport function StyledLink({ href, children }: { href: string; children: React.ReactNode }) {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <a className={styles.link} href={href} target=\"_blank\" rel=\"noreferrer\">\n      {children} {<Icon name=\"external-link-alt\" />}\n    </a>\n  );\n}\n","import { PageLayoutType } from '@grafana/data';\nimport { PluginPage } from '@grafana/runtime';\nimport { Alert } from '@grafana/ui';\nimport { PageTitle } from '@shared/ui/PageTitle';\nimport React from 'react';\n\nimport { StyledLink } from './StyledLink';\n\nexport function NoDataSourcePage() {\n  return (\n    <PluginPage layout={PageLayoutType.Canvas}>\n      <PageTitle title=\"Grafana Profiles Drilldown\" />\n\n      <Alert severity=\"error\" title=\"Missing Pyroscope data source!\">\n        This plugin requires a Pyroscope data source. Please{' '}\n        <StyledLink href=\"/connections/datasources/new\">add and configure a Pyroscope data source</StyledLink> to your\n        Grafana instance.\n      </Alert>\n    </PluginPage>\n  );\n}\n","import { DomainHookReturnValue } from '@shared/types/DomainHookReturnValue';\nimport { useState } from 'react';\n\nimport { useFetchInstances } from '../infrastructure/useFetchInstances';\n\nexport function useOnboardingModal(): DomainHookReturnValue {\n  const [settingsUrl, setSettingsUrl] = useState('https://grafana.com/auth/sign-in/');\n\n  const isCloud = /\\.grafana(-dev|-ops)?\\.net$/.test(window.location.host);\n  const { instances } = useFetchInstances(isCloud);\n\n  if (instances && instances.orgSlug && instances.hpInstanceId) {\n    const newSettingsUrl = `https://grafana.com/orgs/${instances.orgSlug}/hosted-profiles/${instances.hpInstanceId}`;\n\n    if (settingsUrl !== newSettingsUrl) {\n      setSettingsUrl(newSettingsUrl);\n    }\n  }\n\n  return {\n    data: {\n      settingsUrl,\n      isCloud,\n    },\n    actions: {},\n  };\n}\n","import { useQuery } from '@tanstack/react-query';\nimport { PLUGIN_API_URL } from 'src/constants';\n\nexport function useFetchInstances(enabled = true) {\n  const { isFetching, error, data } = useQuery({\n    enabled,\n    queryKey: ['instances'],\n    queryFn: () =>\n      fetch(`${PLUGIN_API_URL}/grafanacom-api/instances`).then((response) => response.json()),\n  });\n\n  return {\n    isFetching,\n    error,\n    instances: data,\n  };\n}\n","import { css, cx } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\nimport DecreaseLatency from '@img/decrease-latency.png';\nimport HeroImage from '@img/hero-image.png';\nimport ReduceCosts from '@img/reduce-costs.png';\nimport ResolveIncidents from '@img/resolve-incidents.png';\nimport React from 'react';\n\nimport { useOnboardingModal } from '../domain/useOnboardingModal';\nimport { StyledLink } from './StyledLink';\n\n/** This was extracted from the former `styles.module.scss` */\n// TODO Use more spacial and color parameters from `theme`\nconst getStyles = (theme: GrafanaTheme2) => ({\n  onboardingRow: css`\n    background: ${theme.colors.background.secondary};\n    display: flex;\n    margin-top: 16px;\n    gap: 20px;\n    padding: 20px;\n    margin-bottom: 2.5rem;\n  `,\n  onboardingParagraph: css`\n    padding: 20px 64px;\n    text-align: center;\n    line-height: 2;\n    flex: 1;\n    margin: 0;\n  `,\n  onboardingPanel: css`\n    flex: 1;\n    display: flex;\n    flex-flow: column wrap;\n    -webkit-box-align: center;\n    align-items: center;\n    margin-top: 16px;\n    text-align: center;\n  `,\n  onboardingPanelHeader: css`\n    line-height: 1.5;\n    margin-bottom: 1em;\n  `,\n  onboardingPanelImage: css`\n    width: 5rem;\n    margin-bottom: 1em;\n  `,\n  hero: css`\n    display: flex;\n    flex-direction: row;\n  `,\n  heroTitles: css`\n    flex: 1;\n  `,\n  heroImage: css`\n    width: 40%;\n    margin-left: 16px;\n    margin-top: 16px;\n    margin-bottom: 16px;\n    border-radius: 3px;\n  `,\n  onboardingPanelNumber: css`\n    color: rgb(236, 109, 19);\n    text-align: center;\n    display: grid;\n    place-items: center;\n    background-image: linear-gradient(135deg, currentcolor, 75%, rgb(204, 204, 220));\n    border-radius: 100%;\n    font-size: 2.5rem;\n    line-height: 5rem;\n    height: 5rem;\n    width: 5rem;\n    margin-bottom: 1em;\n  `,\n  // TODO use theme.colors\n  color2: css`\n    color: rgb(190, 85, 190);\n  `,\n  // TODO use theme.colors\n  color3: css`\n    color: rgb(126, 108, 218);\n  `,\n  // FIXME use theme.colors\n  onboardingPanelNumberSpan: css`\n    color: rgb(220, 220, 220);\n  `,\n  onboardingPanelDescription: css`\n    text-align: justify;\n    text-align: center;\n    line-height: 1.66;\n    margin-top: 0;\n  `,\n  title: css`\n    margin-bottom: 0.5em;\n    line-height: 1.5;\n  `,\n  subtitle: css`\n    margin-bottom: 1em;\n    line-height: 1.5;\n    font-size: 1.25rem;\n  `,\n});\n\nexport function OnboardingModal() {\n  const styles = useStyles2(getStyles);\n  const { data } = useOnboardingModal();\n\n  return (\n    <div data-testid=\"onboarding-modal\">\n      <div className={styles.hero} data-testid=\"hero\">\n        <div className={styles.heroTitles}>\n          <h1 className={styles.title}>Welcome to Grafana Profiles Drilldown</h1>\n          <h2 className={styles.subtitle}>\n            Optimize infrastructure spend, simplify debugging, and enhance application performance\n          </h2>\n          {/* <Button>Continue to Pyroscope</Button> */}\n        </div>\n        <img src={HeroImage} className={styles.heroImage}></img>\n      </div>\n\n      <div data-testid=\"what-you-can-do\">\n        <h3>What You Can Do</h3>\n        <div className={styles.onboardingRow}>\n          <div className={styles.onboardingPanel}>\n            <img className={styles.onboardingPanelImage} src={ReduceCosts}></img>\n            <h3 className={styles.onboardingPanelHeader}>Reduce Costs</h3>\n            <p className={styles.onboardingPanelDescription}>\n              Spot CPU spikes, memory leaks, and other inefficiencies with code-level visibility into resource usage.\n              Teams can then optimize their code and lower infrastructure costs.\n            </p>\n          </div>\n          <div className={styles.onboardingPanel}>\n            <img className={styles.onboardingPanelImage} src={DecreaseLatency}></img>\n            <h3 className={styles.onboardingPanelHeader}>Decrease Latency</h3>\n            <p className={styles.onboardingPanelDescription}>\n              Maintain high speed and efficiency and improve application performance. In a competitive digital world,\n              decreasing latency translates to increasing revenue.\n            </p>\n          </div>\n          <div className={styles.onboardingPanel}>\n            <img className={styles.onboardingPanelImage} src={ResolveIncidents}></img>\n            <h3 className={styles.onboardingPanelHeader}>Resolve Incidents Faster</h3>\n            <p className={styles.onboardingPanelDescription}>\n              Cut down the mean time to resolution (MTTR) by correlating continuous profiling data with metrics, logs,\n              and traces to quickly identify the root cause of any issue.\n            </p>\n          </div>\n        </div>\n      </div>\n\n      <div data-testid=\"how-to-get-started\">\n        <h3>How to Get Started</h3>\n        <div className={styles.onboardingRow}>\n          {data.isCloud ? (\n            <>\n              <div className={styles.onboardingPanel}>\n                <div className={styles.onboardingPanelNumber}>\n                  <span className={styles.onboardingPanelNumberSpan}>1</span>\n                </div>\n                <h3 className={styles.onboardingPanelHeader}>Add Profiling to Your Application</h3>\n                <p className={styles.onboardingPanelDescription}>\n                  Use{' '}\n                  <StyledLink href=\"https://grafana.com/docs/pyroscope/latest/configure-client/grafana-alloy/\">\n                    Grafana Alloy\n                  </StyledLink>{' '}\n                  or{' '}\n                  <StyledLink href=\"https://grafana.com/docs/pyroscope/next/configure-client/language-sdks/\">\n                    Pyroscope SDKs\n                  </StyledLink>{' '}\n                  to push profiles from your applications to Grafana Cloud.\n                </p>\n              </div>\n              <div className={styles.onboardingPanel}>\n                <div className={cx(styles.onboardingPanelNumber, styles.color2)}>\n                  <span className={styles.onboardingPanelNumberSpan}>2</span>\n                </div>\n                <h3 className={styles.onboardingPanelHeader}>Configure Your Applications</h3>\n                <p className={styles.onboardingPanelDescription}>\n                  Go to <StyledLink href={data.settingsUrl}>Grafana Cloud Stack settings</StyledLink> to find your\n                  Grafana Cloud Credentials.\n                </p>\n              </div>\n              <div className={styles.onboardingPanel}>\n                <div className={cx(styles.onboardingPanelNumber, styles.color3)}>\n                  <span className={styles.onboardingPanelNumberSpan}>3</span>\n                </div>\n                <h3 className={styles.onboardingPanelHeader}>Start Getting Performance Insights</h3>\n                <p className={styles.onboardingPanelDescription}>\n                  Once you&apos;re done with initial setup, refresh this page to see your profiling data.\n                </p>\n              </div>\n            </>\n          ) : (\n            <>\n              <div className={styles.onboardingPanel}>\n                <div className={styles.onboardingPanelNumber}>\n                  <span className={styles.onboardingPanelNumberSpan}>1</span>\n                </div>\n                <h3 className={styles.onboardingPanelHeader}>Set Up Your Pyroscope Server</h3>\n                <p className={styles.onboardingPanelDescription}>\n                  Install <StyledLink href=\"https://grafana.com/docs/pyroscope/latest/\">Pyroscope Server</StyledLink> on\n                  your infrastructure. Or if you want to use a hosted service, go to{' '}\n                  <StyledLink href={data.settingsUrl}>Grafana Cloud Stack settings</StyledLink> to find your Grafana\n                  Cloud Credentials.\n                </p>\n              </div>\n              <div className={styles.onboardingPanel}>\n                <div className={cx(styles.onboardingPanelNumber, styles.color2)}>\n                  <span className={styles.onboardingPanelNumberSpan}>2</span>\n                </div>\n                <h3 className={styles.onboardingPanelHeader}>Configure Grafana</h3>\n                <p className={styles.onboardingPanelDescription}>\n                  Add a new <StyledLink href=\"/connections/datasources/new\">Pyroscope datasource</StyledLink>. Use your\n                  Pyroscope server URL and appropriate security credentials if you use Grafana Cloud Profiles.\n                </p>\n              </div>\n              <div className={styles.onboardingPanel}>\n                <div className={cx(styles.onboardingPanelNumber, styles.color3)}>\n                  <span className={styles.onboardingPanelNumberSpan}>3</span>\n                </div>\n                <h3 className={styles.onboardingPanelHeader}>Add Profiling to Your Application</h3>\n                <p className={styles.onboardingPanelDescription}>\n                  Use{' '}\n                  <StyledLink href=\"https://grafana.com/docs/pyroscope/latest/configure-client/grafana-alloy/\">\n                    Grafana Alloy\n                  </StyledLink>{' '}\n                  or{' '}\n                  <StyledLink href=\"https://grafana.com/docs/pyroscope/next/configure-client/language-sdks/\">\n                    Pyroscope SDKs\n                  </StyledLink>{' '}\n                  to push profiles from your applications to Grafana Cloud.\n                </p>\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n\n      {data.isCloud && (\n        <div data-testid=\"how-billing-works\">\n          <h3>How Billing Works</h3>\n          <div className={styles.onboardingRow}>\n            <p className={styles.onboardingParagraph}>\n              Usage of Grafana Cloud Profiles is subject to{' '}\n              <StyledLink href=\"https://grafana.com/pricing/\">Grafana Cloud Pricing</StyledLink> for Profiles.\n              <br></br>\n              For additional information, read the announcement&nbsp;\n              <StyledLink href=\"https://grafana.com/blog/2023/08/09/grafana-cloud-profiles-for-continuous-profiling/\">\n                blog post\n              </StyledLink>\n              .\n            </p>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2, PageLayoutType } from '@grafana/data';\nimport { PluginPage } from '@grafana/runtime';\nimport { useStyles2 } from '@grafana/ui';\nimport React from 'react';\n\nimport { OnboardingModal } from './OnboardingModal';\n\ntype OnboardingPageProps = {\n  onCloseModal: () => void;\n};\n\n/** This was extracted from the former `styles.module.scss` */\n// TODO Use more spacial and color parameters from `theme`\nconst getStyles = (theme: GrafanaTheme2) => ({\n  onboardingPage: css`\n    padding: 16px;\n    margin: 64px;\n    position: relative;\n    background-color: ${theme.colors.background.primary};\n  `,\n  closeButton: css`\n    position: absolute;\n    top: -30px;\n    opacity: 0.8;\n    right: -32px;\n    border: none;\n    border-radius: 50%;\n    width: 40px;\n    height: 40px;\n    line-height: 40px;\n    display: block;\n    padding: 0;\n    margin: 0;\n    font-size: 22px;\n  `,\n});\n\nconst pageNav = { text: 'Onboarding' };\n\nexport function OnboardingPage({ onCloseModal }: OnboardingPageProps) {\n  const styles = useStyles2(getStyles);\n\n  return (\n    // The use of `PluginPage` is to set a clear \"Onboarding\" breadcrumb\n    // Using `Custom` ensures that it takes up the whole page (and doesn't conflict with the other `PluginPage`)\n    <PluginPage pageNav={pageNav} layout={PageLayoutType.Custom}>\n      <div className={styles.onboardingPage}>\n        <button\n          className={styles.closeButton}\n          onClick={onCloseModal}\n          title=\"Close\"\n          data-testid=\"close-onboarding-modal\"\n        >\n          &times;\n        </button>\n        <OnboardingModal />\n      </div>\n    </PluginPage>\n  );\n}\n","import React from 'react';\n\nimport { useOnboarding } from './domain/useOnboarding';\nimport { EmptyLoadingPage } from './ui/EmptyLoadingPage';\nimport { NoDataSourcePage } from './ui/NoDataSourcePage';\nimport { OnboardingPage } from './ui/OnboardingPage';\n\ntype OnboardingProps = {\n  children: React.ReactNode;\n};\n\n/**\n * Displays an onboarding dialog instructing how to push data only when data is not present\n */\nexport function Onboarding({ children }: OnboardingProps) {\n  const { data, actions } = useOnboarding();\n\n  if (data.shouldShowLoadingPage) {\n    return <EmptyLoadingPage />;\n  }\n\n  if (data.shouldShowOnboardingPage) {\n    return <OnboardingPage onCloseModal={actions.closeModal} />;\n  }\n\n  if (data.shouldShowNoDataSourceBanner) {\n    return <NoDataSourcePage />;\n  }\n\n  return <>{children}</>;\n}\n","import { Button } from '@grafana/ui';\nimport React from 'react';\n\nexport function BackButton({ onClick }: { onClick?: () => void }) {\n  const callback = onClick ? onClick : () => history.back();\n  return (\n    <Button variant=\"secondary\" onClick={callback} aria-label=\"Back to Profiles Drilldown\">\n      Back to Profiles Drilldown\n    </Button>\n  );\n}\n","import { PageName, reportInteraction } from '@shared/domain/reportInteraction';\nimport { useEffect, useState } from 'react';\n\nexport function useReportPageInitialized(page: PageName) {\n  const [initialized, setInitialized] = useState(false);\n  useEffect(() => {\n    if (!initialized) {\n      setInitialized(true);\n      reportInteraction('g_pyroscope_app_page_initialized', { page });\n    }\n  }, [page, initialized]);\n}\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\nimport React from 'react';\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css`\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    gap: ${theme.spacing(1)};\n    width: 100%;\n  `,\n  column: css`\n    width: 50%;\n  `,\n});\n\ntype AdHocColumnsProps = {\n  left: React.ReactNode;\n  right: React.ReactNode;\n};\n\nexport function AdHocColumns({ left, right }: AdHocColumnsProps) {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.column}>{left}</div>\n      <div className={styles.column}>{right}</div>\n    </div>\n  );\n}\n","import { ApiClient } from '@shared/infrastructure/http/ApiClient';\n\nimport { AdHocProfile } from '../domain/AdHocProfile';\nimport { stripBase64Prefix } from './helpers/stripBase64Prefix';\n\nclass AdHocProfileClient extends ApiClient {\n  async get(profileId: string, profileType: string): Promise<AdHocProfile> {\n    const response = await this.fetch('/adhocprofiles.v1.AdHocProfileService/Get', {\n      method: 'POST',\n      body: JSON.stringify({\n        id: profileId,\n        profile_type: profileType,\n      }),\n    });\n\n    const json = await response.json();\n\n    return {\n      id: json.id,\n      name: json.name,\n      profileTypes: json.profileTypes,\n      profile: JSON.parse(json.flamebearerProfile),\n    };\n  }\n\n  async uploadSingle(file: File): Promise<AdHocProfile> {\n    const profile = await this._readProfileFile(file);\n\n    const response = await this.fetch('/adhocprofiles.v1.AdHocProfileService/Upload', {\n      method: 'POST',\n      body: JSON.stringify({\n        name: file.name,\n        profile,\n      }),\n    });\n\n    const json = await response.json();\n\n    return {\n      id: json.id,\n      name: file.name,\n      profileTypes: json.profileTypes,\n      // when the uploaded file contains multiple sample types, the 1st is always returned by the API\n      profile: JSON.parse(json.flamebearerProfile),\n    };\n  }\n\n  // TODO\n  async uploadDiff() {\n    return {\n      id: '?',\n      name: '??',\n      profileTypes: [],\n      profile: null,\n    };\n  }\n\n  async _readProfileFile(file: File): Promise<string> {\n    return new Promise((resolve, reject) => {\n      const fileReader = new FileReader();\n\n      fileReader.addEventListener('load', () => {\n        try {\n          resolve(stripBase64Prefix(fileReader.result as string));\n        } catch (error) {\n          reject(error);\n        }\n      });\n\n      fileReader.addEventListener('error', (/*event: ProgressEvent<FileReader>*/) => {\n        // TODO: upgrade TS lib compiler option to support latest JS features\n        // See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error/cause\n        reject(new Error(`Error while reading file \"${file.name}\"!` /*, { cause: event }*/));\n      });\n\n      fileReader.readAsDataURL(file);\n    });\n  }\n}\n\nexport const adHocProfileClient = new AdHocProfileClient();\n","export function stripBase64Prefix(fileContent: string): string {\n  const [, base64Content] = fileContent.split(';base64,');\n\n  if (!base64Content) {\n    throw new Error('No content after stripping the base64 prefix.');\n  }\n\n  if (fileContent === base64Content) {\n    throw new Error('No base64 prefix?!');\n  }\n\n  return base64Content;\n}\n","import { SelectableValue } from '@grafana/data';\nimport { displayError } from '@shared/domain/displayStatus';\nimport { useCallback, useEffect, useState } from 'react';\n\nimport { adHocProfileClient } from '../infrastructure/adHocProfileClient';\nimport { AdHocProfile } from './AdHocProfile';\n\nconst DEFAULT_PROFILE_DATA: AdHocProfile = {\n  id: '',\n  name: '',\n  profileTypes: [],\n  profile: null,\n};\n\nexport function useUploadFile() {\n  const [isLoading, setIsLoading] = useState(false);\n  const [profileData, setProfileData] = useState(DEFAULT_PROFILE_DATA);\n\n  useEffect(() => {\n    return () => {\n      adHocProfileClient.abort();\n    };\n  }, []);\n\n  const removeFile = useCallback(() => {\n    adHocProfileClient.abort();\n\n    setIsLoading(false);\n    setProfileData(DEFAULT_PROFILE_DATA);\n  }, []);\n\n  const processFile = useCallback(\n    async (file: File) => {\n      removeFile();\n\n      try {\n        setIsLoading(true);\n\n        const data = await adHocProfileClient.uploadSingle(file);\n\n        setProfileData(data);\n      } catch (error) {\n        setProfileData(DEFAULT_PROFILE_DATA);\n\n        if (!adHocProfileClient.isAbortError(error)) {\n          displayError(error as Error, ['Error while uploading profile!', (error as Error).message]);\n        }\n      }\n\n      setIsLoading(false);\n    },\n    [removeFile]\n  );\n\n  const removeProfile = () => {\n    adHocProfileClient.abort();\n\n    setIsLoading(false);\n    setProfileData((prevData) => ({ ...prevData, profile: null }));\n  };\n\n  const selectProfileType = useCallback(\n    async (option: SelectableValue<string>) => {\n      const profileType = option.value;\n\n      if (!profileType || !profileData.id || !profileData.profileTypes.includes(profileType)) {\n        return;\n      }\n\n      removeProfile();\n\n      setIsLoading(true);\n\n      try {\n        const data = await adHocProfileClient.get(profileData.id, profileType);\n\n        setProfileData((prevData) => ({\n          ...prevData,\n          profile: data.profile,\n        }));\n      } catch (error) {\n        if (!adHocProfileClient.isAbortError(error)) {\n          displayError(error as Error, ['Error while fetching profile!', (error as Error).message]);\n        }\n      }\n\n      setIsLoading(false);\n    },\n    [profileData.id, profileData.profileTypes]\n  );\n\n  return {\n    processFile,\n    profileTypes: profileData.profileTypes,\n    selectProfileType,\n    profile: profileData.profile,\n    removeFile,\n    isLoading,\n  };\n}\n","import { DropzoneFile, FileDropzone } from '@grafana/ui';\nimport { displayError } from '@shared/domain/displayStatus';\nimport React, { useCallback } from 'react';\n\nimport { ACCEPTED_FILE_TYPES } from '../domain/accepted-file-types';\n\nconst options = {\n  accept: ACCEPTED_FILE_TYPES,\n  multiple: false,\n  // maxSize: 42, // TODO?\n  onError(error: Error) {\n    displayError(error, ['Error while uploading file!', error.toString()]);\n  },\n};\n\ntype AdHocFileDropZoneProps = {\n  onFileDropped: (file: File) => void;\n  onFileRemove: (file: DropzoneFile) => void;\n};\n\nexport function AdHocFileDropZone({ onFileDropped, onFileRemove }: AdHocFileDropZoneProps) {\n  const onDropAccepted = useCallback(\n    function (files: File[]) {\n      onFileDropped(files[0]);\n    },\n    [onFileDropped]\n  );\n\n  return (\n    <FileDropzone\n      options={{\n        ...options,\n        onDropAccepted,\n      }}\n      onFileRemove={onFileRemove}\n    />\n  );\n}\n","export const ACCEPTED_FILE_TYPES = {\n  'application/gzip': ['.gz'],\n  'application/json': ['.json'],\n  'application/proto': ['.pb', '.pprof'],\n};\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\nimport { FlameGraph } from '@shared/components/FlameGraph/FlameGraph';\nimport { FlamebearerProfile } from '@shared/types/FlamebearerProfile';\nimport React from 'react';\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  flamegraph: css`\n    margin-top: ${theme.spacing(2)};\n  `,\n});\n\nexport function AdHocFlameGraph({ profile, diff }: { profile: FlamebearerProfile; diff?: boolean }) {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.flamegraph} data-testid=\"flamegraph\">\n      <FlameGraph profile={profile} diff={diff} />\n    </div>\n  );\n}\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2, SelectableValue } from '@grafana/data';\nimport { InlineField, InlineFieldRow, Select, useStyles2 } from '@grafana/ui';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\ntype ProfileSelectorProps = {\n  profileTypes: string[];\n  onChange: (options: SelectableValue<string>) => void;\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  selectorContainer: css`\n    display: flex;\n    justify-content: center;\n    margin-bottom: ${theme.spacing(2)};\n  `,\n});\n\nexport function AdHocProfileTypeSelector({ profileTypes, onChange }: ProfileSelectorProps) {\n  const styles = useStyles2(getStyles);\n\n  const options = useMemo(() => profileTypes.map((type) => ({ value: type, label: type })), [profileTypes]);\n  const [option, setOption] = useState<SelectableValue<string>>();\n\n  const _onChange = useCallback(\n    (o: SelectableValue<string>) => {\n      setOption(o);\n      onChange(o);\n    },\n    [onChange]\n  );\n\n  useEffect(() => {\n    // when the uploaded file contains multiple sample types, the 1st is always returned by the API\n    // so, we select it automatically\n    setOption(options[0]);\n  }, [options]);\n\n  return (\n    <div className={styles.selectorContainer}>\n      <InlineFieldRow>\n        <InlineField label=\"Profile\" disabled={!options.length} data-testid=\"profile-types-dropdown\">\n          {/* added a key to ensure the dropdown is properly reset */}\n          <Select key={option?.value} value={option} options={options} onChange={_onChange} width={16} />\n        </InlineField>\n      </InlineFieldRow>\n    </div>\n  );\n}\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Spinner, useStyles2 } from '@grafana/ui';\nimport React from 'react';\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  spinner: css`\n    text-align: center;\n    margin-top: ${theme.spacing(2)};\n  `,\n});\n\nexport function AdHocSpinner() {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.spinner}>\n      <Spinner size={36} />\n    </div>\n  );\n}\n","import { SelectableValue } from '@grafana/data';\nimport { reportInteraction } from '@shared/domain/reportInteraction';\nimport React, { memo } from 'react';\n\nimport { useUploadFile } from '../../domain/useUploadFile';\nimport { AdHocFileDropZone } from '../AdHocFileDropZone';\nimport { AdHocFlameGraph } from '../AdHocFlameGraph';\nimport { AdHocProfileTypeSelector } from '../AdHocProfileTypeSelector';\nimport { AdHocSpinner } from '../AdHocSpinner';\n\nfunction AdHocSingleComponent() {\n  const { processFile, profileTypes, selectProfileType, profile, removeFile, isLoading } = useUploadFile();\n\n  const onChangeProfileType = (options: SelectableValue<string>) => {\n    reportInteraction('g_pyroscope_app_ad_hoc_profile_metric_selected');\n    selectProfileType(options);\n  };\n\n  const onFileDropped = (file: File) => {\n    reportInteraction('g_pyroscope_app_ad_hoc_file_dropped', { fileType: file.type });\n    processFile(file);\n  };\n\n  const onFileRemoved = () => {\n    reportInteraction('g_pyroscope_app_ad_hoc_file_removed');\n    removeFile();\n  };\n\n  return (\n    <div>\n      <AdHocProfileTypeSelector profileTypes={profileTypes} onChange={onChangeProfileType} />\n      <AdHocFileDropZone onFileDropped={onFileDropped} onFileRemove={onFileRemoved} />\n      {isLoading && !profile ? <AdHocSpinner /> : null}\n      {profile && <AdHocFlameGraph profile={profile} />}\n    </div>\n  );\n}\n\nexport const AdHocSingle = memo(AdHocSingleComponent);\n","import React from 'react';\n\nimport { AdHocColumns } from '../AdHocColums';\nimport { AdHocSingle } from './AdHocSingle';\n\nexport function AdHocComparison() {\n  return <AdHocColumns left={<AdHocSingle />} right={<AdHocSingle />} />;\n}\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Tab, TabContent, TabsBar, useStyles2 } from '@grafana/ui';\nimport React, { useState } from 'react';\n\nimport { AdHocComparison } from './tabs/AdHocComparison';\nimport { AdHocSingle } from './tabs/AdHocSingle';\n\n// import { AdHocDiff } from './tabs/AdHocDiff';\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  tabContent: css`\n    padding: ${theme.spacing(2)};\n    margin: ${theme.spacing(2)};\n  `,\n});\n\nexport function AdHocTabs() {\n  const styles = useStyles2(getStyles);\n  const [activeTabIndex, setActiveTabIndex] = useState(0);\n\n  return (\n    <div>\n      <TabsBar>\n        <Tab label=\" Single view\" active={activeTabIndex === 0} onChangeTab={() => setActiveTabIndex(0)} />\n        <Tab label=\" Comparison view\" active={activeTabIndex === 1} onChangeTab={() => setActiveTabIndex(1)} />\n        {/* <Tab\n          label=\" Diff view\"\n          active={activeTabIndex === 2}\n          onChangeTab={onChangeTab(2)}\n        /> */}\n      </TabsBar>\n      <TabContent className={styles.tabContent}>\n        {activeTabIndex === 0 && <AdHocSingle />}\n        {activeTabIndex === 1 && <AdHocComparison />}\n        {/* {activeTabIndex === 2 && <AdHocDiff  />} */}\n      </TabContent>\n    </div>\n  );\n}\n","import { BackButton } from '@shared/components/Common/BackButton';\nimport { useReportPageInitialized } from '@shared/infrastructure/tracking/useReportPageInitialized';\nimport { PageTitle } from '@shared/ui/PageTitle';\nimport React from 'react';\n\nimport { AdHocTabs } from './ui/AdHocTabs';\n\nexport default function AdHocView() {\n  useReportPageInitialized('ad_hoc');\n  return (\n    <>\n      <PageTitle title=\"Ad hoc view\" />\n      <AdHocTabs />\n      <BackButton />\n    </>\n  );\n}\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Modal, Spinner, useStyles2 } from '@grafana/ui';\nimport React, { useState } from 'react';\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  loadingIcon: css`\n    color: ${theme.colors.primary.main};\n    font-size: 48px;\n    margin-bottom: ${theme.spacing(2)};\n    display: flex;\n    justify-content: center;\n  `,\n  loadingMessage: css`\n    text-align: center;\n    font-size: ${theme.typography.h4.fontSize};\n    margin-bottom: ${theme.spacing(2)};\n  `,\n  fullScreenModal: css`\n    width: 100vw !important;\n    height: 100vh !important;\n    max-width: none !important;\n    max-height: none !important;\n    margin: 0 !important;\n    top: 0 !important;\n    left: 0 !important;\n    right: 0 !important;\n    bottom: 0 !important;\n  `,\n});\n\nexport default function GitHubCallbackView() {\n  const styles = useStyles2(getStyles);\n  const [isModalOpen, setIsModalOpen] = useState(true);\n\n  const handleDismiss = () => {\n    setIsModalOpen(false);\n    window.close();\n  };\n\n  return (\n    <Modal\n      title=\"GitHub Login\"\n      isOpen={isModalOpen}\n      onDismiss={handleDismiss}\n      closeOnEscape={true}\n      closeOnBackdropClick={true}\n      className={styles.fullScreenModal}\n    >\n      <div className={styles.loadingMessage}>\n        <div className={styles.loadingIcon}>\n          <Spinner size=\"xl\" />\n        </div>\n        <p>Logging in to GitHub...</p>\n      </div>\n    </Modal>\n  );\n}\n","import { UrlSyncContextProvider } from '@grafana/scenes';\nimport { useReportPageInitialized } from '@shared/infrastructure/tracking/useReportPageInitialized';\nimport React, { useMemo } from 'react';\n\nimport { SceneProfilesExplorer } from './components/SceneProfilesExplorer/SceneProfilesExplorer';\n\nexport default function ProfilesExplorerView() {\n  const sceneProfilesExplorer = useMemo(() => new SceneProfilesExplorer({}), []);\n  useReportPageInitialized('explore');\n\n  return (\n    <UrlSyncContextProvider scene={sceneProfilesExplorer} updateUrlOnInit={false} createBrowserHistorySteps={true}>\n      <sceneProfilesExplorer.Component model={sceneProfilesExplorer} />\n    </UrlSyncContextProvider>\n  );\n}\n","import { ConfirmModal, IconButton } from '@grafana/ui';\nimport { RecordingRuleViewModel } from '@shared/types/RecordingRuleViewModel';\nimport React from 'react';\n\ntype Props = {\n  rule: RecordingRuleViewModel;\n  confirm: () => void;\n};\n\nexport function DeleteRecordingRuleButton({ rule, confirm }: Props) {\n  const [isOpen, setIsOpen] = React.useState(false);\n  return (\n    <>\n      <IconButton\n        name=\"trash-alt\"\n        onClick={() => setIsOpen(true)}\n        variant=\"destructive\"\n        aria-label=\"Delete recording rule\"\n      />\n      <ConfirmModal\n        isOpen={isOpen}\n        title={'Delete recording rule'}\n        body={`Are you sure you want to delete ${rule.metricName} recording rule?`}\n        confirmText=\"Yes\"\n        onConfirm={() => {\n          confirm();\n          setIsOpen(false);\n        }}\n        onDismiss={() => setIsOpen(false)}\n      />\n    </>\n  );\n}\n","import { displayError, displaySuccess } from '@shared/domain/displayStatus';\nimport { useFetchRecordingRules } from '@shared/infrastructure/recording-rules/useFetchRecordingRules';\nimport { RecordingRuleViewModel } from '@shared/types/RecordingRuleViewModel';\n\nexport function useRecordingRulesView() {\n  const { recordingRules, error: fetchError, remove, isFetching } = useFetchRecordingRules();\n\n  return {\n    data: {\n      recordingRules,\n      fetchError,\n      isFetching,\n    },\n    actions: {\n      async removeRecordingRule(rule: RecordingRuleViewModel) {\n        try {\n          await remove(rule);\n          displaySuccess([`Recording rule ${rule.metricName} deleted!`]);\n        } catch (e) {\n          displayError(e as Error, [`Failed to delete recording rule ${rule.metricName}.`]);\n        }\n      },\n    },\n  };\n}\n","import { css } from '@emotion/css';\nimport { Column, EmptyState, Icon, InteractiveTable, TagList, Text, Tooltip, useStyles2 } from '@grafana/ui';\nimport { BackButton } from '@shared/components/Common/BackButton';\nimport { parseQuery } from '@shared/domain/url-params/parseQuery';\nimport { HttpClientError } from '@shared/infrastructure/http/HttpClientError';\nimport { getProfileMetric, ProfileMetricId } from '@shared/infrastructure/profile-metrics/getProfileMetric';\nimport { RecordingRuleViewModel } from '@shared/types/RecordingRuleViewModel';\nimport { PageTitle } from '@shared/ui/PageTitle';\nimport React from 'react';\n\nimport { EmptyLoadingPage } from '../../app/components/Onboarding/ui/EmptyLoadingPage';\nimport { DeleteRecordingRuleButton } from './DeleteRecordingRuleButton';\nimport { useRecordingRulesView } from './domain/useRecordingRulesView';\n\nconst RecordingRulesDetails = (model: RecordingRuleViewModel) => {\n  const { matchers, readonly } = model;\n\n  let labels: string[] = [];\n\n  matchers.forEach((matcher) => {\n    const p = parseQuery(matcher);\n\n    labels = [...labels, ...p.labels.filter((label) => !label.trim().match(/^__profile_type__/))];\n  });\n\n  let matchersContent = <span>No labels</span>;\n\n  if (labels.length !== 0) {\n    matchersContent = <span className={css({ fontFamily: 'monospace' })}>{labels.join(', ')}</span>;\n  }\n\n  return (\n    <div>\n      <dl>\n        <dt>Filters</dt>\n        <dd>{matchersContent}</dd>\n        <dt>Read only</dt>\n        <dd>{readonly ? 'Yes' : 'No'}</dd>\n      </dl>\n    </div>\n  );\n};\n\nexport default function RecordingRulesView() {\n  const styles = useStyles2(getStyles);\n  const { data, actions } = useRecordingRulesView();\n  const { recordingRules } = data;\n\n  if (data.isFetching) {\n    return <EmptyLoadingPage />;\n  }\n\n  const columns: Array<Column<RecordingRuleViewModel>> = [\n    {\n      id: 'metricName',\n      header: 'Name',\n      sortType: 'alphanumeric',\n    },\n    {\n      id: 'serviceName',\n      header: 'Service Name',\n      sortType: 'alphanumeric',\n      cell: (props) => {\n        const rule: RecordingRuleViewModel = props.row.original;\n        return (\n          rule.serviceName || (\n            <Text element=\"span\" color=\"secondary\">\n              All services\n            </Text>\n          )\n        );\n      },\n    },\n    {\n      id: 'profileType',\n      header: 'Profile Type',\n      sortType: 'alphanumeric',\n    },\n    {\n      id: 'functionName',\n      header: 'Function Name',\n      sortType: 'alphanumeric',\n      cell: (props) => {\n        const rule: RecordingRuleViewModel = props.row.original;\n        return (\n          rule.functionName || (\n            <Text element=\"span\" color=\"secondary\">\n              Total (all functions)\n            </Text>\n          )\n        );\n      },\n    },\n    {\n      id: 'groupBy',\n      header: 'Labels',\n      cell: (props) => {\n        // Exclude hidden labels.\n        const rule: RecordingRuleViewModel = props.row.original;\n        const labels = rule.groupBy?.filter((label: string) => !label.match(/^__\\S+__$/));\n\n        if (!labels || labels.length === 0) {\n          return (\n            <Text element=\"span\" color=\"secondary\">\n              None\n            </Text>\n          );\n        }\n\n        return <TagList className={styles.tagList} displayMax={4} tags={labels} />;\n      },\n    },\n    {\n      id: 'actions',\n      header: 'Actions',\n      disableGrow: true,\n      cell: (props) => {\n        const rule: RecordingRuleViewModel = props.row.original;\n        if (rule.readonly) {\n          return (\n            <Tooltip content=\"This rule is provisioned with tenant settings and cannot be deleted.\">\n              <Icon name=\"info-circle\" />\n            </Tooltip>\n          );\n        } else {\n          return <DeleteRecordingRuleButton rule={rule} confirm={() => actions.removeRecordingRule(rule)} />;\n        }\n      },\n    },\n  ];\n\n  const formattedRules = (recordingRules || []).map((rule) => {\n    const profileType = getProfileMetric(rule.profileType as ProfileMetricId);\n    return {\n      ...rule,\n      profileType: `${profileType.group}/${profileType.type}`,\n    };\n  });\n\n  const isEmpty = !formattedRules || formattedRules.length === 0;\n\n  let component = null;\n\n  if (data.fetchError) {\n    component = <RecordingRulesViewError error={data.fetchError} />;\n  } else if (isEmpty) {\n    component = (\n      <EmptyState message={'No recording rules'} variant=\"not-found\" button={<BackButton />}>\n        Open a flame graph, click on the &quot;total&quot; block at the top and select &quot;Create recording rule&quot;\n        from the context menu to define a new rule.\n      </EmptyState>\n    );\n  } else {\n    component = (\n      <div>\n        <InteractiveTable\n          className={css({ marginBottom: '32px' })}\n          columns={columns}\n          pageSize={10}\n          data={formattedRules || []}\n          getRowId={(rule) => rule.id}\n          renderExpandedRow={RecordingRulesDetails}\n        ></InteractiveTable>\n        <BackButton />\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <PageTitle title=\"Recording rules\" />\n      {component}\n    </>\n  );\n}\n\nconst getStyles = () => ({\n  tagList: css`\n    flex-direction: row;\n    justify-content: start;\n  `,\n});\n\nfunction RecordingRulesViewError({ error }: { error: HttpClientError }) {\n  let errorMessage = 'Error while retrieving recording rules';\n  if (error.response?.status === 404) {\n    errorMessage = 'This feature requires Pyroscope with recording_rules flag enabled.';\n  } else if (error.message) {\n    errorMessage = error.message;\n  }\n  return (\n    <EmptyState message=\"Error while retrieving recording rules\" variant=\"not-found\" button={<BackButton />}>\n      {errorMessage}\n    </EmptyState>\n  );\n}\n","import { displayError, displaySuccess } from '@shared/domain/displayStatus';\nimport { useMaxNodesFromUrl } from '@shared/domain/url-params/useMaxNodesFromUrl';\nimport { DEFAULT_SETTINGS, PluginSettings } from '@shared/infrastructure/settings/PluginSettings';\nimport { useFetchPluginSettings } from '@shared/infrastructure/settings/useFetchPluginSettings';\nimport { useEffect, useState } from 'react';\n\nexport function useUISettingsView() {\n  const { settings, error: fetchError, mutate } = useFetchPluginSettings();\n  const setMaxNodes = useMaxNodesFromUrl()[1];\n  const [currentSettings, setCurrentSettings] = useState<PluginSettings>(settings ?? DEFAULT_SETTINGS);\n\n  useEffect(() => {\n    if (settings) {\n      setCurrentSettings(settings);\n    }\n  }, [settings]);\n\n  return {\n    data: {\n      ...currentSettings,\n      fetchError,\n    },\n    actions: {\n      toggleCollapsedFlamegraphs() {\n        setCurrentSettings((s) => ({\n          ...s,\n          collapsedFlamegraphs: !s.collapsedFlamegraphs,\n        }));\n      },\n      updateMaxNodes(event: React.ChangeEvent<HTMLInputElement>) {\n        setCurrentSettings((s) => ({\n          ...s,\n          maxNodes: Number(event.target.value),\n        }));\n      },\n      toggleEnableFlameGraphDotComExport() {\n        setCurrentSettings((s) => ({\n          ...s,\n          enableFlameGraphDotComExport: !s.enableFlameGraphDotComExport,\n        }));\n      },\n      toggleEnableFunctionDetails() {\n        setCurrentSettings((s) => ({\n          ...s,\n          enableFunctionDetails: !s.enableFunctionDetails,\n        }));\n      },\n      toggleEnableMetricsFromProfiles() {\n        setCurrentSettings((s) => ({\n          ...s,\n          enableMetricsFromProfiles: !s.enableMetricsFromProfiles,\n        }));\n      },\n      async saveSettings() {\n        setMaxNodes(currentSettings.maxNodes);\n\n        try {\n          await mutate(currentSettings);\n\n          displaySuccess(['Plugin settings successfully saved!']);\n        } catch (error) {\n          displayError(error as Error, [\n            'Error while saving the plugin settings!',\n            'Please try again later, sorry for the inconvenience.',\n          ]);\n        }\n      },\n    },\n  };\n}\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Alert, FieldSet, InlineField, InlineFieldRow, InlineSwitch, Input, useStyles2 } from '@grafana/ui';\nimport { displayError } from '@shared/domain/displayStatus';\nimport { featureToggles } from '@shared/infrastructure/settings/featureToggles';\nimport React from 'react';\n\nimport { useUISettingsView } from './domain/useUISettingsView';\n\nexport function UISettingsView({ children }: { children: React.ReactNode }) {\n  const styles = useStyles2(getStyles);\n  const { data, actions } = useUISettingsView();\n\n  if (data.fetchError) {\n    displayError(data.fetchError, [\n      'Error while retrieving the plugin settings!',\n      'Please try to reload the page, sorry for the inconvenience.',\n    ]);\n  }\n\n  function onSubmit(event: React.FormEvent) {\n    event.preventDefault();\n    actions.saveSettings();\n  }\n\n  return (\n    <form className={styles.settingsForm} onSubmit={onSubmit}>\n      <FieldSet label=\"Flame graph\" data-testid=\"flamegraph-settings\">\n        <InlineFieldRow>\n          <InlineField label=\"Collapsed flame graphs\" labelWidth={24}>\n            <InlineSwitch\n              label=\"Toggle collapsed flame graphs\"\n              name=\"collapsed-flamegraphs\"\n              value={data.collapsedFlamegraphs}\n              onChange={actions.toggleCollapsedFlamegraphs}\n            />\n          </InlineField>\n        </InlineFieldRow>\n        <InlineFieldRow>\n          <InlineField label=\"Maximum number of nodes\" tooltip=\"\" labelWidth={24}>\n            <Input name=\"max-nodes\" type=\"number\" min=\"1\" value={data.maxNodes} onChange={actions.updateMaxNodes} />\n          </InlineField>\n        </InlineFieldRow>\n      </FieldSet>\n      <FieldSet label=\"Function details\" data-testid=\"function-details-settings\">\n        <InlineFieldRow>\n          <InlineField\n            label=\"Enable function details\"\n            labelWidth={24}\n            tooltip={\n              <div className={styles.tooltip}>\n                <p>\n                  The function details feature enables mapping of resource usage to lines of source code. If the GitHub\n                  integration is configured, then the source code will be downloaded from GitHub.\n                </p>\n                <p>\n                  <a\n                    href=\"https://grafana.com/docs/grafana-cloud/monitor-applications/profiles/pyroscope-github-integration/\"\n                    target=\"_blank\"\n                    rel=\"noreferrer noopener\"\n                  >\n                    Learn more\n                  </a>\n                </p>\n              </div>\n            }\n            interactive\n          >\n            <InlineSwitch\n              label=\"Toggle function details\"\n              name=\"function-details-feature\"\n              value={data.enableFunctionDetails}\n              onChange={actions.toggleEnableFunctionDetails}\n            />\n          </InlineField>\n        </InlineFieldRow>\n      </FieldSet>\n\n      {featureToggles.metricsFromProfiles && (\n        <FieldSet label=\"Metrics from profiles\" data-testid=\"metrics-from-profiles\">\n          <Alert severity=\"info\" title=\"\" className={css({ maxWidth: '1000px' })}>\n            {data.enableMetricsFromProfiles ? (\n              <>\n                <p>\n                  Disabling this feature only hides it from the UI. No existing recording rules are removed. These rules\n                  will remain active and continue to export metrics, which will still impact your bill.\n                </p>\n                <p>To stop exporting data, delete all related recording rules before disabling this feature.</p>\n              </>\n            ) : (\n              <p>\n                Enabling this feature lets you define recording rules from Profiles Drilldown. Any recording rules you\n                create will send new metrics to your Grafana Cloud instance, increasing your data usage in Grafana Mimir\n                and potentially affecting your bill.\n              </p>\n            )}\n          </Alert>\n          <InlineFieldRow>\n            <InlineField\n              label=\"Enable metrics from profiles\"\n              tooltip=\"Allows creating recording rules from profiles\"\n              labelWidth={30}\n            >\n              <InlineSwitch\n                label=\"Enable metrics from profiles\"\n                name=\"metrics-from-profiles\"\n                value={data.enableMetricsFromProfiles}\n                onChange={actions.toggleEnableMetricsFromProfiles}\n              />\n            </InlineField>\n          </InlineFieldRow>\n        </FieldSet>\n      )}\n\n      {children}\n    </form>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  settingsForm: css`\n    & > fieldset {\n      border: 0 none;\n      border-bottom: 1px solid ${theme.colors.border.weak};\n      padding-left: 0;\n    }\n\n    & > fieldset > legend {\n      font-size: ${theme.typography.h4.fontSize};\n    }\n  `,\n  buttons: css`\n    display: flex;\n    gap: ${theme.spacing(1)};\n    margin-top: ${theme.spacing(3)};\n  `,\n  tooltip: css`\n    p {\n      margin: ${theme.spacing(1)};\n    }\n\n    a {\n      color: ${theme.colors.text.link};\n    }\n\n    em {\n      font-style: normal;\n      font-weight: ${theme.typography.fontWeightBold};\n    }\n  `,\n});\n","import { usePluginComponents } from '@grafana/runtime';\n\nconst SETTINGS_EXTENSION_POINT_ID = 'grafana-pyroscope-app/settings/v1';\n\nexport type SettingsExtensionProps = {\n  datasourceUid: string; // the datasource uid currently in use, extensions might not use it\n  backButton: React.ReactNode; // the back button component\n};\n\ntype UseSettingsExtensionsResult<Props = {}> = {\n  components: Array<React.ComponentType<Props>>;\n  isLoading: boolean;\n};\n\nexport function useSettingsExtensions(): UseSettingsExtensionsResult<SettingsExtensionProps> {\n  return usePluginComponents<SettingsExtensionProps>({\n    extensionPointId: SETTINGS_EXTENSION_POINT_ID,\n  });\n}\n","import { useMaxNodesFromUrl } from '@shared/domain/url-params/useMaxNodesFromUrl';\nimport { useRef, useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\n\nimport { PLUGIN_BASE_URL, ROUTES } from '../../../constants';\nimport { useSettingsExtensions } from './useSettingsExtensions';\n\nexport function useSettingsView() {\n  const [maxNodesFromUrl] = useMaxNodesFromUrl();\n  const [activeTab, setActiveTab] = useState(0);\n\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const referrerRef = useRef(location.state?.referrer);\n\n  const { components, isLoading } = useSettingsExtensions();\n\n  return {\n    data: {\n      activeTab,\n      components,\n      isLoading,\n    },\n    actions: {\n      setActiveTab(tab: number) {\n        setActiveTab(tab);\n      },\n      goBack() {\n        if (!referrerRef.current) {\n          navigate(`${PLUGIN_BASE_URL}${ROUTES.EXPLORE}`);\n          return;\n        }\n\n        const backUrl = new URL(referrerRef.current);\n\n        // when calling saveSettings() above, the new maxNodes value is set and the URL search parameter is updated (see useMaxNodesFromUrl.ts)\n        if (maxNodesFromUrl) {\n          backUrl.searchParams.set('maxNodes', String(maxNodesFromUrl));\n        }\n\n        navigate(`${backUrl.pathname}${backUrl.search}`);\n      },\n    },\n  };\n}\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Button, Space, Tab, TabsBar, useStyles2 } from '@grafana/ui';\nimport { BackButton } from '@shared/components/Common/BackButton';\nimport { ApiClient } from '@shared/infrastructure/http/ApiClient';\nimport { useReportPageInitialized } from '@shared/infrastructure/tracking/useReportPageInitialized';\nimport { PageTitle } from '@shared/ui/PageTitle';\nimport React from 'react';\n\nimport { UISettingsView } from './components/UISettingsView/UISettingsView';\nimport { useSettingsView } from './domain/useSettingsView';\n\ninterface ComponentWithMeta {\n  meta?: {\n    title: string;\n  };\n}\n\nexport default function SettingsView() {\n  const styles = useStyles2(getStyles);\n  const { data, actions } = useSettingsView();\n\n  useReportPageInitialized('settings');\n\n  if (data.isLoading) {\n    return <div>Loading...</div>;\n  }\n\n  // Define the build in tabs\n  const builtInTabs = [\n    {\n      // Standard UI settings tab\n      title: 'UI Settings',\n      content: (\n        <UISettingsView>\n          <div className={styles.buttons}>\n            <Button variant=\"primary\" type=\"submit\">\n              Save settings\n            </Button>\n            <BackButton onClick={actions.goBack} />\n          </div>\n        </UISettingsView>\n      ),\n    },\n  ];\n\n  const pyroscopeDataSource = ApiClient.selectDefaultDataSource();\n  const pluginProps = {\n    datasourceUid: pyroscopeDataSource.uid,\n    backButton: (\n      <div className={styles.buttons}>\n        <BackButton onClick={actions.goBack} />\n      </div>\n    ),\n  };\n  const pluginTabs = data.components.map((Component) => {\n    // get title from plugin meta (works in Grafana 11.6+)\n    const title = (Component as ComponentWithMeta).meta?.title || 'Unknown Extension';\n\n    return {\n      title: title,\n      content: <Component {...pluginProps} />,\n    };\n  });\n\n  const allTabs = [...builtInTabs, ...pluginTabs];\n\n  return (\n    <>\n      <PageTitle title=\"Profiles settings (tenant)\" />\n      {/* if there is only one tab, don't render tab bar */}\n      {allTabs.length > 1 && (\n        <>\n          <TabsBar>\n            {allTabs.map((tab, index) => (\n              <Tab\n                key={`settings-tab-${index}`}\n                label={tab.title}\n                active={data.activeTab === index}\n                onChangeTab={() => actions.setActiveTab(index)}\n              />\n            ))}\n          </TabsBar>\n          <Space v={2} />\n        </>\n      )}\n      {allTabs[data.activeTab].content}\n    </>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  buttons: css`\n    display: flex;\n    gap: ${theme.spacing(1)};\n    margin-top: ${theme.spacing(3)};\n  `,\n});\n","import React from 'react';\nimport { Navigate, Routes as ReactRouterRoutes, Route } from 'react-router-dom';\n\nimport { PLUGIN_BASE_URL, ROUTES } from '../constants';\nimport AdHocView from '../pages/AdHocView/AdHocView';\nimport GitHubCallback from '../pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/ui/GitHubCallbackView';\nimport ProfilesExplorerView from '../pages/ProfilesExplorerView/ProfilesExplorerView';\nimport RecordingRulesView from '../pages/RecordingRulesView/RecordingRulesView';\nimport SettingsView from '../pages/SettingsView/SettingsView';\n\nexport function Routes() {\n  return (\n    <ReactRouterRoutes>\n      <Route path={ROUTES.EXPLORE} element={<ProfilesExplorerView />} />\n      <Route path={ROUTES.ADHOC} element={<AdHocView />} />\n      <Route path={ROUTES.SETTINGS} element={<SettingsView />} />\n      <Route path={ROUTES.RECORDING_RULES} element={<RecordingRulesView />} />\n      <Route path={ROUTES.GITHUB_CALLBACK} element={<GitHubCallback />} />\n      {/* Default Route */}\n      <Route path=\"/*\" element={<Navigate to={`${PLUGIN_BASE_URL}${ROUTES.EXPLORE}`} replace />} />\n    </ReactRouterRoutes>\n  );\n}\n","import { PageLayoutType } from '@grafana/data';\nimport { PluginPage } from '@grafana/runtime';\nimport { InlineBanner } from '@shared/ui/InlineBanner';\nimport { PageTitle } from '@shared/ui/PageTitle';\nimport React from 'react';\n\nexport function ErrorPage({ error }: { error: Error }) {\n  return (\n    <PluginPage layout={PageLayoutType.Canvas}>\n      <div className=\"pyroscope-app\">\n        <PageTitle title=\"Grafana Profiles Drilldown\" />\n\n        <InlineBanner\n          severity=\"error\"\n          title=\"Fatal error!\"\n          message=\"Please try reloading the page or, if the problem persists, contact your organization admin. Sorry for the inconvenience.\"\n          error={error}\n          errorContext={{ handheldBy: 'React error boundary' }}\n        />\n      </div>\n    </PluginPage>\n  );\n}\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2, PageLayoutType } from '@grafana/data';\nimport { PluginPage } from '@grafana/runtime';\nimport { ErrorBoundary, useStyles2 } from '@grafana/ui';\nimport { queryClient } from '@shared/infrastructure/react-query/queryClient';\nimport { initFaro } from '@shared/infrastructure/tracking/faro/faro';\nimport { QueryClientProvider } from '@tanstack/react-query';\nimport React, { useState } from 'react';\n\nimport { Onboarding } from './components/Onboarding/Onboarding';\nimport { Routes } from './Routes';\nimport { ErrorPage } from './ui/ErrorPage';\n\ninitFaro();\n\nexport function App() {\n  const styles = useStyles2(getStyles);\n  const [error, setError] = useState<Error>();\n\n  if (error) {\n    return <ErrorPage error={error} />;\n  }\n\n  return (\n    <ErrorBoundary onError={setError}>\n      {() => (\n        <QueryClientProvider client={queryClient}>\n          <Onboarding>\n            <div className={styles.pageContainer}>\n              <PluginPage layout={PageLayoutType.Custom}>\n                <div className=\"pyroscope-app\">\n                  <Routes />\n                </div>\n              </PluginPage>\n            </div>\n          </Onboarding>\n        </QueryClientProvider>\n      )}\n    </ErrorBoundary>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  pageContainer: css`\n    display: flex;\n    flex-direction: column;\n    padding: ${theme.spacing(1)} ${theme.spacing(2)} ${theme.spacing(2)} ${theme.spacing(2)};\n    flex-basis: 100%;\n    flex-grow: 1;\n  `,\n});\n"],"names":["StatsApiClient","ApiClient","get","response","fetch","method","body","JSON","stringify","json","hasIngestedData","dataIngested","oldestProfileTime","Number","newestProfileTime","statsApiClient","useOnboarding","isModalClosed","setIsModalClosed","useState","pyroscopeDataSourcesCount","getPyroscopeDataSources","length","isFetching","error","stats","enabled","data","refetch","useQuery","placeholderData","queryKey","queryFn","abort","isAbortError","useFetchTenantStats","hasNoUserData","shouldShowLoadingPage","shouldShowOnboardingPage","shouldShowNoDataSourceBanner","actions","closeModal","getStyles","theme","row","css","display","flexDirection","justifyContent","alignItems","headerColumn","minWidth","column","tooltip","color","colors","text","secondary","fontSize","typography","bodySmall","contentWithIcon","styleMixins","mediaUp","v1","breakpoints","sm","formatSize","size","formattedValueToString","getValueFormat","formatCount","count","QueryAnalysisTooltip","props","styles","useStyles2","totalBytesInTimeRange","queryImpact","queryAnalysisTooltip","useMemo","div","data-testid","className","undefined","totalQueriedSeries","deduplicationNeeded","Divider","queryScopes","map","s","i","key","strong","componentType","componentCount","blockCount","seriesCount","profileCount","sampleCount","indexBytes","profileBytes","symbolBytes","Toggletip","content","fitContent","span","IconButton","name","aria-label","PageTitleComponent","title","queryAnalysis","fullTitle","Helmet","titleContainer","Stack","PyroscopeLogo","h1","infoArea","PluginInfo","spacing","h2","PageTitle","memo","EmptyLoadingPage","PluginPage","layout","PageLayoutType","Canvas","Icon","link","StyledLink","href","children","a","target","rel","NoDataSourcePage","Alert","severity","useOnboardingModal","settingsUrl","setSettingsUrl","isCloud","test","window","location","host","instances","PLUGIN_API_URL","then","useFetchInstances","orgSlug","hpInstanceId","newSettingsUrl","onboardingRow","background","onboardingParagraph","onboardingPanel","onboardingPanelHeader","onboardingPanelImage","hero","heroTitles","heroImage","onboardingPanelNumber","color2","color3","onboardingPanelNumberSpan","onboardingPanelDescription","subtitle","OnboardingModal","img","src","HeroImage","h3","ReduceCosts","p","DecreaseLatency","ResolveIncidents","cx","br","onboardingPage","primary","closeButton","pageNav","OnboardingPage","onCloseModal","Custom","button","onClick","Onboarding","BackButton","callback","history","back","Button","variant","useReportPageInitialized","page","initialized","setInitialized","useEffect","reportInteraction","container","AdHocColumns","left","right","AdHocProfileClient","profileId","profileType","id","profile_type","profileTypes","profile","parse","flamebearerProfile","uploadSingle","file","_readProfileFile","uploadDiff","Promise","resolve","reject","fileReader","FileReader","addEventListener","fileContent","base64Content","split","Error","stripBase64Prefix","result","readAsDataURL","adHocProfileClient","DEFAULT_PROFILE_DATA","useUploadFile","isLoading","setIsLoading","profileData","setProfileData","removeFile","useCallback","processFile","displayError","message","selectProfileType","option","value","includes","prevData","options","accept","multiple","onError","toString","AdHocFileDropZone","onFileDropped","onFileRemove","onDropAccepted","files","FileDropzone","flamegraph","AdHocFlameGraph","diff","FlameGraph","selectorContainer","AdHocProfileTypeSelector","onChange","type","label","setOption","_onChange","o","InlineFieldRow","InlineField","disabled","Select","width","spinner","AdHocSpinner","Spinner","AdHocSingleComponent","fileType","AdHocSingle","AdHocComparison","tabContent","AdHocTabs","activeTabIndex","setActiveTabIndex","TabsBar","Tab","active","onChangeTab","TabContent","AdHocView","loadingIcon","main","loadingMessage","h4","fullScreenModal","GitHubCallbackView","isModalOpen","setIsModalOpen","Modal","isOpen","onDismiss","close","closeOnEscape","closeOnBackdropClick","ProfilesExplorerView","sceneProfilesExplorer","SceneProfilesExplorer","UrlSyncContextProvider","scene","updateUrlOnInit","createBrowserHistorySteps","Component","model","DeleteRecordingRuleButton","rule","confirm","setIsOpen","React","ConfirmModal","metricName","confirmText","onConfirm","useRecordingRulesView","recordingRules","fetchError","remove","useFetchRecordingRules","removeRecordingRule","displaySuccess","e","RecordingRulesDetails","matchers","readonly","labels","forEach","matcher","parseQuery","filter","trim","match","matchersContent","fontFamily","join","dl","dt","dd","RecordingRulesView","columns","header","sortType","cell","original","serviceName","Text","element","functionName","groupBy","TagList","tagList","displayMax","tags","disableGrow","Tooltip","formattedRules","getProfileMetric","group","isEmpty","component","RecordingRulesViewError","EmptyState","InteractiveTable","marginBottom","pageSize","getRowId","renderExpandedRow","errorMessage","status","useUISettingsView","settings","mutate","useFetchPluginSettings","setMaxNodes","useMaxNodesFromUrl","currentSettings","setCurrentSettings","DEFAULT_SETTINGS","toggleCollapsedFlamegraphs","collapsedFlamegraphs","updateMaxNodes","event","maxNodes","toggleEnableFlameGraphDotComExport","enableFlameGraphDotComExport","toggleEnableFunctionDetails","enableFunctionDetails","toggleEnableMetricsFromProfiles","enableMetricsFromProfiles","saveSettings","UISettingsView","form","settingsForm","onSubmit","preventDefault","FieldSet","labelWidth","InlineSwitch","Input","min","interactive","featureToggles","metricsFromProfiles","maxWidth","border","weak","buttons","fontWeightBold","SETTINGS_EXTENSION_POINT_ID","useSettingsView","maxNodesFromUrl","activeTab","setActiveTab","navigate","useNavigate","useLocation","referrerRef","useRef","state","referrer","components","usePluginComponents","extensionPointId","tab","goBack","current","PLUGIN_BASE_URL","ROUTES","EXPLORE","backUrl","URL","searchParams","set","String","pathname","search","SettingsView","builtInTabs","pluginProps","datasourceUid","selectDefaultDataSource","uid","backButton","allTabs","meta","index","Space","v","Routes","ReactRouterRoutes","Route","path","ADHOC","SETTINGS","RECORDING_RULES","GITHUB_CALLBACK","GitHubCallback","Navigate","to","replace","ErrorPage","InlineBanner","errorContext","handheldBy","App","setError","ErrorBoundary","QueryClientProvider","client","queryClient","pageContainer","initFaro"],"sourceRoot":""}