/* [create-plugin] version: 5.25.8 */
define(["@emotion/css","@grafana/data","@grafana/runtime","@grafana/ui","d3","lodash","module","react","react-dom","react-router","rxjs"],((e,r,a,o,t,n,i,p,l,s,c)=>(()=>{"use strict";var d,f,u,b,m={6089:r=>{r.exports=e},7781:e=>{e.exports=r},8531:e=>{e.exports=a},2007:e=>{e.exports=o},4201:e=>{e.exports=t},3241:e=>{e.exports=n},1308:e=>{e.exports=i},5959:e=>{e.exports=p},8398:e=>{e.exports=l},1159:e=>{e.exports=s},1269:e=>{e.exports=c}},H={};function S(e){var r=H[e];if(void 0!==r)return r.exports;var a=H[e]={id:e,loaded:!1,exports:{}};return m[e].call(a.exports,a,a.exports,S),a.loaded=!0,a.exports}S.m=m,S.amdO={},S.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return S.d(r,{a:r}),r},f=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,S.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var a=Object.create(null);S.r(a);var o={};d=d||[null,f({}),f([]),f(f)];for(var t=2&r&&e;"object"==typeof t&&!~d.indexOf(t);t=f(t))Object.getOwnPropertyNames(t).forEach((r=>o[r]=()=>e[r]));return o.default=()=>e,S.d(a,o),a},S.d=(e,r)=>{for(var a in r)S.o(r,a)&&!S.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:r[a]})},S.f={},S.e=e=>Promise.all(Object.keys(S.f).reduce(((r,a)=>(S.f[a](e,r),r)),[])),S.u=e=>e+".js?_cache="+{2:"29283447acff0f2a882b",64:"b3fb2b4f75b762d1c426",70:"47cbd903b384d593f78d",72:"34826ce7944a28353b38",74:"73a8b6d9ba7763fdda59",150:"5a28a17cc1e7946baa9c",156:"5c8500f4f7e2e336455d",190:"df6d218bd3995f5a8be3",194:"fba34588b1136cd1c1c6",206:"1f0cf10ae22240c8d894",220:"884b15c6667800130288",327:"eeb34a20e9706d19f3b5",341:"f638ba48a6e82792fe18",353:"7977b2b8bc8f5e1ea0b6",549:"b6b50dbf3fac3640287c",580:"ddddfc2cf4ae953aae6c",582:"7e1e7cef5bb2d2571b5b",644:"50be1452901484d3c8b3",660:"3673cb936fe6d94edf1a",697:"7fb39cf40c08e1e191e9",767:"f7edb9f22271a910deea",776:"af7b61fe118bc8f81cea",814:"c2d7b8b2edef28301efd",876:"4e169abae1f071f2ac66",980:"7b78c3d31ae9ff641dc2"}[e],S.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),S.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),u={},b="grafana-pyroscope-app:",S.l=(e,r,a,o)=>{if(u[e])u[e].push(r);else{var t,n;if(void 0!==a)for(var i=document.getElementsByTagName("script"),p=0;p<i.length;p++){var l=i[p];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")==b+a){t=l;break}}t||(n=!0,(t=document.createElement("script")).charset="utf-8",t.timeout=120,S.nc&&t.setAttribute("nonce",S.nc),t.setAttribute("data-webpack",b+a),t.src=e,0!==t.src.indexOf(window.location.origin+"/")&&(t.crossOrigin="anonymous"),t.integrity=S.sriHashes[o],t.crossOrigin="anonymous"),u[e]=[r];var s=(r,a)=>{t.onerror=t.onload=null,clearTimeout(c);var o=u[e];if(delete u[e],t.parentNode&&t.parentNode.removeChild(t),o&&o.forEach((e=>e(a))),r)return r(a)},c=setTimeout(s.bind(null,void 0,{type:"timeout",target:t}),12e4);t.onerror=s.bind(null,t.onerror),t.onload=s.bind(null,t.onload),n&&document.head.appendChild(t)}},S.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},S.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),S.p="public/plugins/grafana-pyroscope-app/",S.sriHashes={2:"sha256-Q1vyAbzSCxHolm2wQsIPgWLsf+RQA4ITR9bPDYoZcHk=",64:"sha256-/woW1A7tizSZnPKxltEMI5QEsTtV8TbydxWF+2mEtrk=",70:"sha256-2YIX14mVwwFE+WU0X9jGpmO9hULm7dE4YOyKcrWr4ZM=",72:"sha256-bEV8j5pClxrCmXMC6NslsaFKUXJ6slUmO3Cj+zUBStQ=",74:"sha256-RwgiyJu4v1Zj/ou45sD00ueAdlZYbnHla2UxJ4n7/mU=",150:"sha256-crlxtOgEgIGhTZtfW70psQogxlUXQWVksXdG9vpvrAY=",156:"sha256-ddvOu6VH/yV0AGVmbHH/8sEtyv5gWkhfaRsOdJcHgr8=",190:"sha256-mQk4rlbX49m+EUKBBNd3wGsqe7qZVvrWGP/FDofmXAw=",194:"sha256-chG6bdnK4G9SfK3W1NE8g0vPTOzVZq0/jM1ELBPfkak=",206:"sha256-kZof5wDGrWQwOz/0TG0Fk6GdOuLkknIRc9KPCxja4AE=",220:"sha256-TEwRP62KaW+xeVAMxXECOxDRdQOxxg2TaGX7/bWLY3Q=",327:"sha256-dAME3p93vWWwkda3SjyV/N1SRSrCjPa2JHLt1seT9vE=",341:"sha256-3Mkl1nHk+uRw5oo8kPKzWkQNYMG5x7o4n1BwKETd6rU=",353:"sha256-5G2biWrw/wsAAg/CBevtcp8UO/o1/4CVhLpIGU11w0A=",549:"sha256-c0KPqAMtvCG82i/RfBfY6inNkv68mSwTVfBkQPVZSKQ=",580:"sha256-FTRyiqMfH2bJa22ulUqDHNMbsM48kkILkuZq6nztDus=",582:"sha256-TwwpVY6HPjIMGRiZJt/zVtKY689zR88rSqKGFvASpgs=",644:"sha256-HcL7XAUJuIbmu6BA1cUiURY/1x/bzJkvkJJm6o/ccKc=",660:"sha256-r3xU14YwCffcw9NtQPIlBaflQI91/oSpBi0WtYVAXrg=",697:"sha256-NWoBwqkbdYKDMTAy8JcHNBZT6HDmuyTDxbtiIOhaiOA=",767:"sha256-+OLGqvAC+pf8JkzSSI7jsBJb3x/esvfgZt0pQLawJYI=",776:"sha256-XAsyo1w/t/Y7zQVXBUZTL0gjuQGn0lqAdCA21jqgJaM=",814:"sha256-Kb3K/FP+0ywSsNvlwOSCm2dn0UrgYFQzpob+d0vS34Q=",876:"sha256-YXBjXw8+5VDhoSFJsmBDsEsFnbsFJM387jkPlwBShXU=",980:"sha256-yJ/sJEvwOO8RQLXHx8YIFHJJqtk42sd/AP4U18YiOz8="},(()=>{var e={231:0};S.f.j=(r,a)=>{var o=S.o(e,r)?e[r]:void 0;if(0!==o)if(o)a.push(o[2]);else{var t=new Promise(((a,t)=>o=e[r]=[a,t]));a.push(o[2]=t);var n=S.p+S.u(r),i=new Error;S.l(n,(a=>{if(S.o(e,r)&&(0!==(o=e[r])&&(e[r]=void 0),o)){var t=a&&("load"===a.type?"missing":a.type),n=a&&a.target&&a.target.src;i.message="Loading chunk "+r+" failed.\n("+t+": "+n+")",i.name="ChunkLoadError",i.type=t,i.request=n,o[1](i)}}),"chunk-"+r,r)}};var r=(r,a)=>{var o,t,[n,i,p]=a,l=0;if(n.some((r=>0!==e[r]))){for(o in i)S.o(i,o)&&(S.m[o]=i[o]);if(p)p(S)}for(r&&r(a);l<n.length;l++)t=n[l],S.o(e,t)&&e[t]&&e[t][0](),e[t]=0},a=self.webpackChunkgrafana_pyroscope_app=self.webpackChunkgrafana_pyroscope_app||[];a.forEach(r.bind(null,0)),a.push=r.bind(null,a.push.bind(a))})();var g={};S.r(g),S.d(g,{plugin:()=>U});var v=S(1308),h=S.n(v);S.p=h()&&h().uri?h().uri.slice(0,h().uri.lastIndexOf("/")+1):"public/plugins/grafana-pyroscope-app/";var y=S(7781),x=S(5959),N=S.n(x);const I=N().lazy((()=>Promise.all([S.e(194),S.e(814),S.e(72),S.e(580)]).then(S.bind(S,5694)).then((e=>({default:e.App})))));const R=(0,x.lazy)((()=>Promise.all([S.e(194),S.e(72),S.e(776)]).then(S.bind(S,9776))));function A(e){var r,a,o;const{timeRange:t,pyroscopeQuery:n,explorationType:i}=e;var p;if(!n.profileTypeId&&!(null===(r=n.labelSelector)||void 0===r?void 0:r.includes("service_name")))return function(e,r){const a=new URLSearchParams;return a.append("var-dataSource",e),a.append("explorationType","all"),r&&(a.append("from",r.from.toString()),a.append("to",r.to.toString())),`/a/grafana-pyroscope-app/explore?${a.toString()}`}((null===(p=n.datasource)||void 0===p?void 0:p.uid)||"",t);const l=null===(o=n.labelSelector)||void 0===o||null===(a=o.match(/service_name="([^"]+)"/))||void 0===a?void 0:a[1],s=function(e,r){return r||(e?"labels":"all")}(l,i),c=function(e,r,a,o){const t=[];return function(e,r,a,o){var t;e.push(`var-dataSource=${null===(t=r.datasource)||void 0===t?void 0:t.uid}`),o&&e.push(`var-serviceName=${o}`),e.push(`var-profileMetricId=${r.profileTypeId}`),e.push(`explorationType=${a}`)}(t,e,a,o),function(e,r,a,o){!function(e,r){r&&(e.push(`from=${r.from.toString()}`),e.push(`to=${r.to.toString()}`))}(e,a),function(e,r){var a;(null===(a=r.spanSelector)||void 0===a?void 0:a.length)&&e.push(`var-spanSelector=${r.spanSelector.join(",")}`),r.maxNodes&&e.push(`maxNodes=${r.maxNodes}`)}(e,r),function(e,r,a){if(!function(e){return"labels"===e||"flame-graph"===e}(r)||!a.labelSelector)return;const o=function(e){const r=[],a=/(\w+)(=|!=|=~|!~)"([^"]+)"/g;let o;for(;null!==(o=a.exec(e));)if("service_name"!==o[1]){const e="|";r.push(`${o[1]}${e}${o[2]}${e}${o[3]}`)}return r}(a.labelSelector);o.length&&e.push(`var-filters=${o.join(",")}`)}(e,o,r)}(t,e,r,a),t.join("&")}(n,t,s,l);return`/a/grafana-pyroscope-app/explore?${new URLSearchParams(c).toString()}`}const C={targets:[y.PluginExtensionPoints.ExploreToolbarAction,"grafana-assistant-app/navigateToDrilldown/v1"],title:"Open in Grafana Profiles Drilldown",icon:"fire",description:"Try our new queryless experience for profiles",path:"/a/grafana-pyroscope-app/explore",configure(e){if(!e||!e.targets||!e.timeRange||e.targets.length>1)return;const r=e.targets[0];return r.datasource&&"grafana-pyroscope-datasource"===r.datasource.type?{path:A({pyroscopeQuery:r,timeRange:e.timeRange,explorationType:e.explorationType})}:void 0}},w={targets:["grafana/traceview/details"],title:"Open in Grafana Profiles Drilldown",description:"Try our new queryless experience for profiles",path:"/a/grafana-pyroscope-app/explore",onClick:(e,{context:r})=>{if(!(r&&r.serviceName&&r.spanSelector&&r.profileTypeId&&r.timeRange))return;const a=r.serviceName,o=r.spanSelector,t=r.profileTypeId,n=r.timeRange,i={refId:"span-flamegraph-profiles-drilldown-refId",labelSelector:`service_name="${a}"`,profileTypeId:t,spanSelector:o,datasource:r.datasource,groupBy:["service_name"]};if(i.datasource){const e=A({pyroscopeQuery:i,timeRange:n,explorationType:"flame-graph"});window.open(e,"_blank","noopener,noreferrer")}}},U=(new y.AppPlugin).addLink(C).addLink(w).setRootPage((function(){return N().createElement(x.Suspense,null,N().createElement(I,null))})).exposeComponent({id:"grafana-pyroscope-app/embedded-profiles-exploration/v1",title:"Embedded Profiles Exploration",description:"A component that renders a profiles exploration view that can be embedded in other parts of Grafana.",component:function(e){return N().createElement(x.Suspense,{fallback:N().createElement("div",null,"Loading...")},N().createElement(R,e))}});return g})()));
//# sourceMappingURL=module.js.map