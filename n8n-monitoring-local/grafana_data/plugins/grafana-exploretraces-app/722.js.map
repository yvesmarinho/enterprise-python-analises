{"version":3,"file":"722.js?_cache=acdc8abd059829a87569","mappings":"27BAMA,SAASA,EAA+B,G,IAAA,iBACtCC,EAAgB,kBAChBC,GAE8B,EAD3BC,EAAAA,EAAAA,EAAAA,C,6CAcmFA,EAZtF,MAAMC,EAAa,IAAIC,EAAAA,GAAe,CACpCC,MAAOL,EACPM,KAAMN,EAAiBO,IAAID,KAAKE,WAChCC,GAAIT,EAAiBO,IAAIE,GAAGD,aAG9BL,EAAWO,iBAAkBR,IACvBD,GACFA,EAAkBC,EAAMG,SAI5B,MAAMM,EAAc,IAAIC,EAAAA,G,kUAAiB,EAAET,aAAYU,UAAU,EAAMC,cAAkC,QAAnBZ,EAAAA,EAAMY,qBAANZ,IAAAA,EAAAA,EAAuB,QAAWA,IAKxH,IAAKA,EAAMa,aAAc,CACvB,MAAMC,EAAS,IAAIC,gBAAgBC,OAAOC,SAASC,QACnDC,EAAAA,GAAWC,0BAA0BX,EAAaK,EACpD,CAEA,OAAOL,CACT,CAEe,SAASY,EAAyBC,GAC/C,MAAOb,IAAec,EAAAA,EAAAA,UAAS1B,EAA+ByB,IAE9D,OAAKA,EAAME,QAKT,kBAACC,EAAAA,GAAsBA,CAACC,UAAU,KAAKC,MAAOlB,EAAamB,iBAAiB,EAAOC,2BAA2B,GAC5G,kBAACpB,EAAYqB,UAAS,CAACC,MAAOtB,KALzB,kBAACA,EAAYqB,UAAS,CAACC,MAAOtB,GAQzC,C","sources":["webpack://grafana-exploretraces-app/./exposedComponents/EmbeddedTraceExploration/EmbeddedTraceExploration.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { SceneTimeRange, sceneUtils, UrlSyncContextProvider } from '@grafana/scenes';\n\nimport { TraceExploration } from '../../pages/Explore/TraceExploration';\nimport { EmbeddedTraceExplorationState } from 'exposedComponents/types';\n\nfunction buildTraceExplorationFromState({\n  initialTimeRange,\n  onTimeRangeChange,\n  ...state\n}: EmbeddedTraceExplorationState) {\n  const $timeRange = new SceneTimeRange({\n    value: initialTimeRange,\n    from: initialTimeRange.raw.from.toString(),\n    to: initialTimeRange.raw.to.toString(),\n  });\n\n  $timeRange.subscribeToState((state) => {\n    if (onTimeRangeChange) {\n      onTimeRangeChange(state.value);\n    }\n  });\n\n  const exploration = new TraceExploration({ $timeRange, embedded: true, initialMetric: state.initialMetric ?? 'rate', ...state });\n\n  // Otherwise, we'll sync with the URL when in embedded mini mode,\n  // and this conflicts the embedded mini mode query when Traces Drilldown is also opened\n  // because the URL is already synced with Traces Drilldown\n  if (!state.embeddedMini) {\n    const params = new URLSearchParams(window.location.search);\n    sceneUtils.syncStateFromSearchParams(exploration, params);\n  }\n\n  return exploration;\n}\n\nexport default function EmbeddedTraceExploration(props: EmbeddedTraceExplorationState) {\n  const [exploration] = useState(buildTraceExplorationFromState(props));\n\n  if (!props.urlSync) {\n    return <exploration.Component model={exploration} />;\n  }\n\n  return (\n    <UrlSyncContextProvider namespace='td' scene={exploration} updateUrlOnInit={false} createBrowserHistorySteps={true}>\n      <exploration.Component model={exploration} />\n    </UrlSyncContextProvider>\n  );\n}\n"],"names":["buildTraceExplorationFromState","initialTimeRange","onTimeRangeChange","state","$timeRange","SceneTimeRange","value","from","raw","toString","to","subscribeToState","exploration","TraceExploration","embedded","initialMetric","embeddedMini","params","URLSearchParams","window","location","search","sceneUtils","syncStateFromSearchParams","EmbeddedTraceExploration","props","useState","urlSync","UrlSyncContextProvider","namespace","scene","updateUrlOnInit","createBrowserHistorySteps","Component","model"],"sourceRoot":""}