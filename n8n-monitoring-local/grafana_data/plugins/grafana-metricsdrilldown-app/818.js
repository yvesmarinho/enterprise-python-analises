"use strict";(self.webpackChunkgrafana_metricsdrilldown_app=self.webpackChunkgrafana_metricsdrilldown_app||[]).push([[818],{13934:(e,t,a)=>{a.d(t,{BR:()=>l,Hi:()=>o,KF:()=>r});var n=a(85959);const r=(0,a(69989).ef)(),l=(0,n.createContext)({trail:r});function o(){return(0,n.useContext)(l)}},46818:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var n=a(85959),r=a.n(n),l=a(77307),o=a(85358),c=a(28464),i=a(87073),s=a(69989),m=a(76217),u=a(82473);const d=({query:e,initialStart:t,initialEnd:a,dataSource:d})=>{const[p]=(0,c.n)(),g=(0,n.useRef)(!1);(0,n.useEffect)(()=>{g.current||(g.current=!0,(0,i.z)("exposed_component_viewed",{component:"label_breakdown"}))},[]);const{metric:h,labels:b}=(0,m.$9)(e),f=(0,s.ef)({metric:h,initialDS:d.uid,initialFilters:b.map(({label:e,op:t,value:a})=>({key:e,operator:t,value:a})),$timeRange:(0,u._)(t,a),embedded:!0});return r().createElement("div",{"data-testid":"metrics-drilldown-embedded-label-breakdown"},p?r().createElement(l.E,{error:p}):r().createElement(o.X,{trail:f}))}},77307:(e,t,a)=>{a.d(t,{E:()=>m});var n=a(46089),r=a(37768),l=a(82007),o=a(85959),c=a.n(o),i=a(81159),s=a(60341);function m({error:e}){const t=(0,l.useStyles2)(u),a=(0,i.useNavigate)(),{pathname:n,search:m}=(0,i.useLocation)(),d=(0,o.useCallback)(()=>{const e=new URLSearchParams(m),t=new URLSearchParams;["from","to","timezone"].filter(t=>e.has(t)).forEach(a=>t.set(a,e.get(a))),a({pathname:n,search:t.toString()}),window.location.reload()},[a,n,m]),[p,g]=(0,o.useState)(!1);return c().createElement("div",{className:t.container},c().createElement(s._,{severity:"error",title:(0,r.t)("error-view.title","Fatal error!"),error:e,errorContext:{handheldBy:"React error boundary"},message:c().createElement(c().Fragment,null,c().createElement("p",{className:t.message},c().createElement(r.x6,{i18nKey:"error-view.message"},"Please"," ",c().createElement(l.TextLink,{href:"#",onClick:d},"try reloading the page")," ","or, if the problem persists, contact your organization admin. Sorry for the inconvenience.")),c().createElement("p",null,c().createElement(l.Collapse,{className:t.callStack,label:(0,r.t)("error-view.stack-trace-label","View stack trace"),isOpen:p,onToggle:()=>g(!p)},c().createElement("pre",null,c().createElement("code",null,e.stack)))))}))}function u(e){return{container:(0,n.css)({margin:e.spacing(2)}),message:(0,n.css)({margin:e.spacing(2,0,1,0)}),callStack:(0,n.css)({backgroundColor:"transparent",border:"0 none","& button":(0,n.css)({paddingLeft:e.spacing(1.5)}),"& button:focus":(0,n.css)({outline:"none",boxShadow:"none"}),"& button > svg":(0,n.css)({marginLeft:e.spacing(-2),marginRight:e.spacing(.5)}),'& [class$="collapse__loader"]':(0,n.css)({display:"none"})})}}},82473:(e,t,a)=>{a.d(t,{_:()=>o});var n=a(87781),r=a(28904);function l(e){return"string"==typeof e&&n.dateMath.isMathString(e)?e:n.dateMath.toDateTime(new Date(e),{roundUp:!1}).toISOString()}function o(e,t){return new r.SceneTimeRange({from:l(e),to:l(t)})}},85358:(e,t,a)=>{a.d(t,{S:()=>m,X:()=>i});var n=a(85959),r=a.n(n),l=a(81159),o=a(98928),c=a(13934);const i=(0,n.lazy)(()=>a.e(899).then(a.bind(a,87899))),s=()=>{const e=(0,l.useLocation)();return r().createElement(l.Navigate,{to:`${o.b.Drilldown}${e.search}`,replace:!0})},m=()=>{const{trail:e}=(0,c.Hi)();return r().createElement(l.Routes,null,r().createElement(l.Route,{path:o.b.Drilldown,element:r().createElement(i,{trail:e})}),r().createElement(l.Route,{path:o.b.Trail,element:r().createElement(s,null)}),r().createElement(l.Route,{path:"*",element:r().createElement(l.Navigate,{to:o.b.Drilldown,replace:!0})}))}}}]);
//# sourceMappingURL=818.js.map?_cache=3c4205cb66e863b090ad