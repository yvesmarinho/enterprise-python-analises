"use strict";(self.webpackChunkgrafana_metricsdrilldown_app=self.webpackChunkgrafana_metricsdrilldown_app||[]).push([[603],{13934:(e,t,a)=>{a.d(t,{BR:()=>l,Hi:()=>c,KF:()=>n});var r=a(85959);const n=(0,a(69989).ef)(),l=(0,r.createContext)({trail:n});function c(){return(0,r.useContext)(l)}},77307:(e,t,a)=>{a.d(t,{E:()=>m});var r=a(46089),n=a(37768),l=a(82007),c=a(85959),i=a.n(c),o=a(81159),s=a(60341);function m({error:e}){const t=(0,l.useStyles2)(u),a=(0,o.useNavigate)(),{pathname:r,search:m}=(0,o.useLocation)(),d=(0,c.useCallback)(()=>{const e=new URLSearchParams(m),t=new URLSearchParams;["from","to","timezone"].filter(t=>e.has(t)).forEach(a=>t.set(a,e.get(a))),a({pathname:r,search:t.toString()}),window.location.reload()},[a,r,m]),[p,g]=(0,c.useState)(!1);return i().createElement("div",{className:t.container},i().createElement(s._,{severity:"error",title:(0,n.t)("error-view.title","Fatal error!"),error:e,errorContext:{handheldBy:"React error boundary"},message:i().createElement(i().Fragment,null,i().createElement("p",{className:t.message},i().createElement(n.x6,{i18nKey:"error-view.message"},"Please"," ",i().createElement(l.TextLink,{href:"#",onClick:d},"try reloading the page")," ","or, if the problem persists, contact your organization admin. Sorry for the inconvenience.")),i().createElement("p",null,i().createElement(l.Collapse,{className:t.callStack,label:(0,n.t)("error-view.stack-trace-label","View stack trace"),isOpen:p,onToggle:()=>g(!p)},i().createElement("pre",null,i().createElement("code",null,e.stack)))))}))}function u(e){return{container:(0,r.css)({margin:e.spacing(2)}),message:(0,r.css)({margin:e.spacing(2,0,1,0)}),callStack:(0,r.css)({backgroundColor:"transparent",border:"0 none","& button":(0,r.css)({paddingLeft:e.spacing(1.5)}),"& button:focus":(0,r.css)({outline:"none",boxShadow:"none"}),"& button > svg":(0,r.css)({marginLeft:e.spacing(-2),marginRight:e.spacing(.5)}),'& [class$="collapse__loader"]':(0,r.css)({display:"none"})})}}},77603:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var r=a(46089),n=a(18531),l=a(82007),c=a(85959),i=a.n(c),o=a(13934),s=a(77307),m=a(87781),u=a(37768),d=a(52769);function p(){const e=(0,l.useStyles2)(g),t=(0,l.useTheme2)();return i().createElement("div",{className:e.wrap},i().createElement("div",{className:e.graphicContainer},i().createElement(d.A,{src:(t.isDark,"/public/plugins/grafana-metricsdrilldown-app/img/logo.svg")})),i().createElement("div",{className:e.text},i().createElement("h3",{className:e.title},i().createElement(u.x6,{i18nKey:"onboarding.title"},"Welcome to Grafana Metrics Drilldown")),i().createElement("p",null,i().createElement(u.x6,{i18nKey:"onboarding.no-datasource"},"We noticed there is no Prometheus datasource configured.",i().createElement("br",null),"Add a"," ",i().createElement("a",{className:"external-link",href:m.locationUtil.assureBaseUrl("/connections/datasources/new")},"Prometheus datasource")," ","to view metrics.")),i().createElement("br",null),i().createElement("p",null,i().createElement(u.x6,{i18nKey:"onboarding.learn-more"},"Check"," ",i().createElement("a",{href:"https://grafana.com/docs/grafana/latest/explore/simplified-exploration/metrics/",target:"_blank",className:"external-link",rel:"noreferrer"},"our docs")," ","to learn more or",i().createElement("br",null),i().createElement("a",{href:"https://play.grafana.org/a/grafana-metricsdrilldown-app/drilldown",target:"_blank",className:"external-link",rel:"noreferrer"},"try it online")," ","in Grafana Play!"))))}const g=e=>({graphicContainer:(0,r.css)({[e.breakpoints.up("md")]:{alignSelf:"flex-end",height:"auto",padding:e.spacing(1),width:"300px"},[e.breakpoints.up("lg")]:{alignSelf:"flex-end",height:"auto",padding:e.spacing(1),width:"400px"},display:"flex",height:"250px",justifyContent:"center",margin:"0 auto",padding:e.spacing(1),width:"200px"}),text:(0,r.css)({alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center"}),title:(0,r.css)({marginBottom:"1.5rem"}),wrap:(0,r.css)({[e.breakpoints.up("md")]:{flexDirection:"row",margin:"4rem auto auto auto"},alignItems:"center",display:"flex",flexDirection:"column",margin:"0 auto auto auto",padding:"2rem",textAlign:"center"})});var f=a(85358),h=a(28464),E=a(87073);var w=a(42624),b=a(17352),x=a(37846);const v=(0,c.createContext)(null);(0,b.Js)(),(0,w.g)();const k=Object.values(n.config.datasources).filter(x.aQ);function y(e){const t=(0,l.useStyles2)(C),[a]=(0,h.n)();return function(){const e=(0,c.useRef)(!1);(0,c.useEffect)(()=>{if(!e.current){e.current=!0;const a=new URL(window.location.href),r=a.searchParams.get("metric")?"metric-details":"metrics-reducer";var t;const n=null!==(t=a.searchParams.get("uel_epid"))&&void 0!==t?t:"";(0,E.z)("app_initialized",{view:r,uel_epid:n})}},[])}(),a?i().createElement("div",{className:t.appContainer,"data-testid":"metrics-drilldown-app"},i().createElement(s.E,{error:a})):k.length?i().createElement("div",{className:t.appContainer,"data-testid":"metrics-drilldown-app"},i().createElement(v.Provider,{value:e},i().createElement(o.BR.Provider,{value:{trail:o.KF}},i().createElement(f.S,null)))):i().createElement(p,null)}function C(e){return{appContainer:(0,r.css)({display:"flex",flexDirection:"column",height:"100%",backgroundColor:e.colors.background.primary})}}},85358:(e,t,a)=>{a.d(t,{S:()=>m,X:()=>o});var r=a(85959),n=a.n(r),l=a(81159),c=a(98928),i=a(13934);const o=(0,r.lazy)(()=>a.e(899).then(a.bind(a,87899))),s=()=>{const e=(0,l.useLocation)();return n().createElement(l.Navigate,{to:`${c.b.Drilldown}${e.search}`,replace:!0})},m=()=>{const{trail:e}=(0,i.Hi)();return n().createElement(l.Routes,null,n().createElement(l.Route,{path:c.b.Drilldown,element:n().createElement(o,{trail:e})}),n().createElement(l.Route,{path:c.b.Trail,element:n().createElement(s,null)}),n().createElement(l.Route,{path:"*",element:n().createElement(l.Navigate,{to:c.b.Drilldown,replace:!0})}))}}}]);
//# sourceMappingURL=603.js.map?_cache=c58a341ba2bcbd5bb331